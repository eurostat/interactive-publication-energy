{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////Users/mathieutholl/Documents/EUROSTAT/Sources/SVN/Main-Vis/stacked_bar/configs/configuration.js","webpack:////Users/mathieutholl/Documents/EUROSTAT/Sources/SVN/Main-Vis/stacked_bar/configs/energy/energy_04_03_01/indicator.js","webpack:///./img sync ^\\.\\/.*\\.svg$","webpack:///./img/DIGECO_03_03_01.svg","webpack:///./img/DIGECO_03_03_02.svg","webpack:///./img/DIGECO_03_03_03.svg","webpack:///./img/EUMOVE_2_1_3_1.svg","webpack:///./img/EUMOVE_2_1_3_2.svg","webpack:///./img/EUMOVE_2_1_3_3.svg","webpack:///./scripts/components/social.js","webpack:///./scripts/components/ui-component.js","webpack:///./scripts/components/utils.js","webpack:///./scripts/dataservice.js","webpack:///./scripts/extracts/extract.js","webpack:///./scripts/lang.js","webpack:///./scripts/localizeservice.js","webpack:///./scripts/main.js","webpack:///./scripts/storage.js","webpack:///./styles/dropdown.css?c7a4","webpack:///./styles/icons.css?df2d","webpack:///./styles/main.css?769c","webpack:///./styles/pub_specific.css?1b89","webpack:///./styles/social.css?2308"],"names":["module","exports","configuration","defaultSortProperty","defaultSortDirection","data","url_dev","url_dev_serve","url_acc","url_prod","url_settings","url_local","lang","countriesEu","countriesMS","countriesOthers","countriesEfta","countriesGroupped","countries","concat","iconColorNotSelected","iconColorSelected","visData","filterKey","filterValue","outputFolder","config","require","constants","createSocial","socialContainer","document","getElementById","innerHTML","currentLocation","window","location","href","indexOf","String","locale","isEmbed","top","self","w","innerWidth","indicators","info","infomark","createElement","setAttribute","_","circleInfo","iconInfo","appendChild","instructions","instructionsText0","no","Image","src","createTextNode","informationsHeader","insertBefore","firstChild","embed","circleEmbed","iconEmbed","twitter","circleTwitter","iconTwitter","twitterLink","twitterHashtags","encodeURIComponent","addEventListener","chapter","code","replace","sharingText","open","fb","circleFacebook","iconFacebook","fbLink","u","t","url","embedContainer","embedHeader","closeButton","spanButton","appData","currentId","textFacebook","textTwitter","embedSpace","share","circleShare","iconShare","shareHeader","shareList","$","tooltip","createIndSelectionCheckBoxes","html","empty","length","entries","index","entry","hoverTitle","title","checked","append","CHECKED_FA_HTML","UNCHECKED_FA_HTML","handleIndCheckbox","click","attr","updateCheckboxes","category","indicatorClick","activeElement","not","find","remove","prepend","createIndSelectionBigIcons","iconsContainer","iconSrc","icon","div","categorySelected","hover","css","onclick","createOnClick","container","when","requestData","done","storage","processedData","localiseInterface","processDataForCategory","createIndSelectionSelectbox","show","unbind","iterator","selectpicker","change","val","buildCustomList","paramIndicator","currentCategory","params","valuesArr","key","sel","appendTo","each","text","getParameterValue","urlParam","on","currentCode","value","itemObj","el","countries2Ignore","exculdeCountry","changeParams","jQuery","processData","currentSorting","visibleParam","checkSortIcons","selectedSortProperty","selectedSortDirection","off","applySort","removeClass","addClass","idx","element","hasClass","event","stopPropagation","preventDefault","e","currentTarget","id","g","p","substr","grouping","groups","setcurrentSortingCS","selectedSortPropertyCS","selectedSortDirectionCS","isIE","userAgent","navigator","inIframe","console","log","currentIndicator","disregardSimpleMode","undefined","hideTopBarForIframe","isMobileDevice","orientation","nbOfDavaAvailableForCountries","countriesMSWithData","arrayResults","Array","result","map","valueData","Geo","toUpperCase","roundValue","precision","parseFloat","toFixed","compare","a","b","valueA","valueB","ascending","comparison","removeParam","sourceURL","rtn","split","param","params_arr","queryString","i","splice","join","isMobile","check","test","vendor","opera","queryService","environment","NODE_ENV","countries2remove","countries2Remove","country2remove","countriesUrl","country","jsonURL","timeIndicators","periods","timeUrl","time","paramUrl","selected","slice","table","includes","pos","dataUrls","datasetName","ajax","type","contentType","dataType","crossDomain","cache","timeout","rawData","fail","jqXHR","textStatus","errorThrown","hide","assembleData","paramObj","jsonStat","JSONstat","jsonData","Dataset","dataset","extractData","size_emp","requests","push","defer","apply","ds","sizes","collection","arrayNoData","geo","times","total","calculatedTotal","hasUndefined","process","groupIndex","groupCode","year","paramsType","elems","sum","paramItem","paramName","valueTmp","Data","valueTot","showWithUndefined","Total","calculateEU","calculatedEU","totalTmp","collectionTmp","strKey","parent","disableCountries","string","toLocaleString","localizeHTMLTag","tagId","useLabel","tag","translateAll","translationAttribute","translateId","translatedValue","parameter","regexS","regex","RegExp","results","exec","setupLocalisation","defaultLanguage","availableLanguages","localise","indicator","mainTitleString","mainTitle","subTitleString","subTitle","footnoteString","footnote","link","bookmarkText","areaLink","linkText","sourceText","areaLinkText","areaLinkLink","bookmark","linkContainer","exp","configFile","appid","library","add","faTwitter","faFacebookF","faCircle","faSolidSquare","faRegularSquare","faShareAlt","faSpinner","faInfo","faCode","faCheck","faCheckSquare","faSortUp","faSortDown","faSort","chart","UIComponentHeight","groupsNames","groupsMapping","groupsColors","groupsTypes","dataColors","color","displayed","dataNotCorrected","arrayNotCorrected","arrayGrouped","dataColumns","countriesCodes","selectedCountry","legendItems","legendContent","legendHide","rtime","delta","indexDataToNotTouch","dataFile","dataFileFiltered","simpleMode","resize","Date","setTimeout","resizeend","d3","prototype","moveToBack","parentNode","onorientationchange","parentFrame","resizeParentFrame","height","offsetHeight","style","ifs","getElementsByTagName","len","f","chartType","init","addNSILogo","img","dom","watch","displaySharing","displayCookieConsent","initDefaultValues","callback","UISelectInd","loadDataFromFile","error","success","response","csv","toObjects","filterDataFile","dataTmp","filter","allKeyValue","NaN","indicatorIndex","paramKey","items","default","group","currData","legend","initSortingCheckboxes","opacity","initSortingColorBoxes","sort","correctData2","groupsRemaining","dataToCorrect","forEach","item","allOtherVal","name","direction","array","dataFileFilter","dataProcess","compareCustum","indexFrom","arrayCountries","arrayCountriesWithoutRemove","nbDataAvailable","arrayDataTmp","eval","correctDataTo100","arrayDataCleaned","indexCountry","reverse","arrDataItem","dataCorrectedTmp","correctData","destroy","indexToNotChange","itempTmp","itempTmpSum","reduce","pv","cv","getDimensions","padding","h","innerHeight","Math","max","dim","axisRotated","barwidth","innerHeigh","mql","matchMedia","matches","publicationId","calculateRemainingHeight","topMargin","marginBottom","marginTop","UISortGroup","fixedLegendHeight","displayedCat","usePatterns","d","dataRow","pattern","tiles","patterns","createElementNS","rect","onover","onout","bindto","template","curId","dataDisplayed","idDisplayed","parseInt","checkboxIcon","curSortIcon","legendShape","patternInLegend","initScatterChart","initChart","findMinimum","min","j","yAxis","bb","generate","size","width","left","categories","names","Object","assign","rows","types","axis","x","tick","centered","rotate","autorotate","multiline","culling","fit","y","label","position","point","onrendered","showVertLines","drawScatterLines","countryFound","selectAll","displayChartAlert","order","format","round","unit","contents","defaultTitleFormat","defaultValueFormat","content","originalData","codes","tooltipOrder","n","indexCode","dataCode","currentGroup","strValue","toString","grid","barWidthRatio","right","labels","v","lines","bar","ratio","rotated","countryName","groupIndexTmp","interaction","inputType","touch","updateCountry","countryCode","highlightCountry","svg","lineFunction","xSaved","circleCoords","line","nodes","visible","xPadding","yPadding","cx","cy","removeZeroValue","lineGraph","load","newValue"],"mappings":"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","file":"stackedbarchart.7dbdc4a60c91962ee88c.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"stackedbarchart\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./scripts/main.js\",\"npm.core-js\",\"npm.d3\",\"npm.d3-geo\",\"npm.d3-shape\",\"npm.d3-selection\",\"npm.d3-array\",\"npm.d3-hierarchy\",\"npm.d3-transition\",\"npm.d3-interpolate\",\"npm.d3-scale\",\"npm.d3-time\",\"npm.d3-format\",\"npm.d3-quadtree\",\"npm.d3-ease\",\"npm.d3-force\",\"npm.d3-request\",\"npm.d3-voronoi\",\"npm.d3-random\",\"npm.d3-collection\",\"npm.d3-polygon\",\"npm.d3-chord\",\"npm.d3-color\",\"npm.d3-drag\",\"npm.d3-zoom\",\"npm.d3-brush\",\"npm.d3-dsv\",\"npm.d3-time-format\",\"npm.fortawesome\",\"npm.d3-axis\",\"npm.d3-timer\",\"npm.billboard.js\",\"npm.bootstrap-select-v4\",\"npm.bootstrap\",\"npm.d3-queue\",\"npm.d3-dispatch\",\"npm.d3-path\",\"npm.jquery-csv\",\"npm.jquery\",\"npm.jsonstat\",\"npm.l10n.js\",\"npm.popper.js\",\"npm.process\",\"npm.regenerator-runtime\",\"npm.setimmediate\",\"npm.timers-browserify\",\"npm.webpack\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = {\n    configuration : {\n        defaultSortProperty: \"data1\",\n        defaultSortDirection: \"desc\",\n        data: {\n            url_dev: \"//www.development.ec.europa.eu/dsws-wd/dsws/rest/data/v2.1/json/\",\n            url_dev_serve: \"http://localhost:8081/data/\",\n            url_acc: \"//www.acceptance.ec.europa.eu/eurostat/wdds/rest/data/v2.1/json/\",\n            url_prod: \"https://ec.europa.eu/eurostat/api/dissemination/statistics/1.0/data/\",\n            url_settings:\"&format=JSON&lang=EN\",\n            url_local: \"http://localhost:8080/data/\",\n            lang: \"en\",\n            countriesEu: [\"EU27_2020\", \"EU28\"],\n            countriesMS: [\"AT\", \"BE\", \"BG\", \"CY\", \"CZ\", \"DE\", \"DK\", \"EE\", \"EL\", \"ES\", \"FI\", \"FR\", \"HR\", \"HU\", \"IE\", \"IT\", \"LT\", \"LU\", \"LV\", \"MT\", \"NL\", \"PL\", \"PT\", \"RO\", \"SE\", \"SI\", \"SK\"/*,\"UK\"*/],\n            countriesOthers: [],\n            countriesEfta: [\"LI\", \"NO\", \"CH\", \"IS\"],\n            get countriesGroupped() {\n                return [this.countriesEu, this.countriesMS, this.countriesOthers, this.countriesEfta]\n            },\n            get countries(){ return this.countriesEu.concat(this.countriesMS).concat(this.countriesOthers).concat(this.countriesEfta)},\n            iconColorNotSelected: \"#044AA3\",\n            iconColorSelected: \"#CC7395\"\n        }\n    }\n}","module.exports = {\n  visData : \n  [\n    {\n      \"chartType\":\"scatter\",\n      \"title\" : \"\",\n      \"publication\": \"Energy\",\n      \"publicationId\": \"Energy\",\n      \"dataType\": \"file\",\n      \"dataFileFilter\": {\n        filterKey : \"Data\",\n        filterValue : \"Data\"\n      },\n      \"chapter\" : \"4.3.1\",\n      \"periods\" : [ \"2020\" ],\n      \"table\" : \"nrg_ind_ren\",\n      \"params\": {},\n      /*\n      \"params\" : {//nrg_ind_ren?precision=1&unit=PC&nrg_bal=REN\n        \"time\" : [ \"2019\",\"2020\"],\n        \"unit\" : [\"PC\"],\n        \"nrg_bal\" : [\"REN\"],\n        \"precision\" : [\"1\"]\n      },*/\n      \"grouping\" : { \n        \"unit\":\"indicatorenergy_04_03_01.hoverUnit\",\n        \"paramName\": \"Data\", \n        \"default\":\"2020\",\n        \"groups\": \n        [ \n          /*\n          {\"code\" : \"2001\", \"elems\" :[\"2001\"],\"title\":\"energy.year.2001\", \"color\": \"#f26522\", \"pattern\" : '<g class=\"scaled\"><polygon style=\"fill:inherit;\" points=\"19.5,16 31.7,28.1 28.1,31.7 15.9,19.5 3.7,31.7 0.2,28.2 12.4,15.9 0.1,3.7 3.6,0.1 15.9,12.4 &#10;&#9;&#9;28.2,0.1 31.8,3.7 &#9;\"></polygon></g>'},\n          {\"code\" : \"2010\", \"elems\" : [ \"2010\"], \"title\": \"energy.year.2010\", \"color\": \"#00A3E4\", \"pattern\" : '<g class=\"scaled\"><path style=\"fill:inherit;\" d=\"M15.9,0.3L0.2,16.1l15.8,15.8l15.8-15.8L15.9,0.3z M15.8,26.5L5.5,16.1L15.8,5.8l10.3,10.3L15.8,26.5z\"/></g>'},\n          {\"code\" : \"2020\", \"elems\" : [\"2020\" ], \"title\" : \"energy.year.2020\", \"color\": \"#286FB7\", \"pattern\" : '<g class=\"scaled\"><path style=\"fill:inherit;\" d=\"M23,19.6l-3.5-3.5L31.6,3.9l-3.5-3.5l-7.6,7.6l-4.5-7.8L11.4,8L3.8,0.4L0.3,3.9l12.2,12.2l-3.5,3.5l-8.6,8.6 l3.5,3.5l7.6-7.6l4.5,7.8l4.5-7.8l7.6,7.6l3.5-3.5L23,19.6L23,19.6z M16,12.5L16,12.5h-0.2H16z M15.9,19.6L15.9,19.6L15.9,19.6 L15.9,19.6z\"/></g>'}\n          */\n        \n          {\"code\" : \"2020\", \"patternInLegend\": \"false\", \"type\": \"bar\", \"elems\" :[\"2020\"],\"title\":\"energy.year.2020\", \"color\": \"#193769\", \"pattern\" : '<g class=\"scaled\"><polygon style=\"fill:inherit;\" points=\"19.5,16 31.7,28.1 28.1,31.7 15.9,19.5 3.7,31.7 0.2,28.2 12.4,15.9 0.1,3.7 3.6,0.1 15.9,12.4 &#10;&#9;&#9;28.2,0.1 31.8,3.7 &#9;\"></polygon></g>'},\n          {\"code\" : \"2020_target\", \"patternInLegend\": \"false\", \"type\": \"line\", \"elems\" : [ \"2020_target\"], \"title\": \"energy.year.2020_target\", \"color\": \"#F79416\", \"pattern\" : '<g class=\"scaled\"><rect class=\"thinBar\" y=\"0\" height=\"10\" width=\"40px\" x=\"0\" style=\"fill:inherit;stroke:inherit;stroke-width:4px\"></rect></g>'},\n\n        ],\n        \"tooltipOrder\": [\"2020\",\"2020_target\"]\n      },\n      \"code\" : \"energy_04_03_01\",\n      \"defaultSelection\" : \"EU27_2020\",\n      \"bookmark\" : \"https://ec.europa.eu/eurostat/databrowser/bookmark/0b03020a-8345-49fd-9623-e5c2343593a2?lang=en\",\n      \"bookmarkText\" : \"source_text_v2\",\n      \"correctDataTo100\": false,\n      \"sourceText\" : \"bookmark_link_v2\",\n      \"showVertLines\": false,\n      \"UISortGroup\" : \"checkboxSort\",\n      \"countries2Remove\": [ \"EU28\", 'UK'],\n      \"showWithUndefined\":true,\n      /*\"yAxis\":{min: 64, max:86},*/\n      \"displaySharing\" : \"no\",\n      \"sharing\":{\n        \"facebook\": {\n            \"title\": \"Shedding light on energy in the EU: Share of energy from renewable sources\",\n            \"image\": \"https://ec.europa.eu/eurostat/cache/infographs/energy_2022/vis/04_03_01/energy_04_03_01.png\"\n        }\n      }\n  },\n],\noutputFolder:\"energy/04_03_01\"\n}\n","var map = {\n\t\"./DIGECO_03_03_01.svg\": \"./img/DIGECO_03_03_01.svg\",\n\t\"./DIGECO_03_03_02.svg\": \"./img/DIGECO_03_03_02.svg\",\n\t\"./DIGECO_03_03_03.svg\": \"./img/DIGECO_03_03_03.svg\",\n\t\"./EUMOVE_2_1_3_1.svg\": \"./img/EUMOVE_2_1_3_1.svg\",\n\t\"./EUMOVE_2_1_3_2.svg\": \"./img/EUMOVE_2_1_3_2.svg\",\n\t\"./EUMOVE_2_1_3_3.svg\": \"./img/EUMOVE_2_1_3_3.svg\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./img sync recursive ^\\\\.\\\\/.*\\\\.svg$\";","module.exports = __webpack_public_path__ + \"img//DIGECO_03_03_01.svg\";","module.exports = __webpack_public_path__ + \"img//DIGECO_03_03_02.svg\";","module.exports = __webpack_public_path__ + \"img//DIGECO_03_03_03.svg\";","module.exports = __webpack_public_path__ + \"img//EUMOVE_2_1_3_1.svg\";","module.exports = __webpack_public_path__ + \"img//EUMOVE_2_1_3_2.svg\";","module.exports = __webpack_public_path__ + \"img//EUMOVE_2_1_3_3.svg\";","\nconst config = require ('../../../../configs/configuration.js')\nconst constants = config.configuration.data;\nimport {\n    _,\n    localizeHTMLTag\n} from '../lang';\n\nimport tooltip from 'bootstrap';\n\nexport default function createSocial() {\n    'use strict';\n\n    //get container\n    const socialContainer = document.getElementById('social-container');\n\n    //recreate\n    socialContainer.innerHTML = '';\n\n\n    let currentLocation = window.location;\n    //always append the lang parameter if not already there\n    if (currentLocation.href.indexOf('lang') === -1) {\n        currentLocation = currentLocation.href + (currentLocation.href.indexOf('?') !== -1 ? \"&lang=\" + String.locale : \"?lang=\" + String.locale);\n    }\n\n    //check if it is embeded or not\n    let isEmbed = (window.top !== window.self) ? true : false;\n\n    const w = window.innerWidth;\n\n    if (w > 1830 || w < 990 || true) {\n        if (window.indicators[0].info) {\n\n            let infomark = document.createElement('span');\n            infomark.setAttribute('class', 'fa-stack');\n            infomark.setAttribute('data-toggle', 'modal');\n            infomark.setAttribute('data-target', '#container-modal-instructions');\n            infomark.setAttribute('data-tooltip', 'tooltip');\n            infomark.setAttribute('data-placement', 'bottom');\n            infomark.setAttribute('title', _('instructions-header'));\n\n            let circleInfo = document.createElement('i');\n            circleInfo.setAttribute('class', 'fa fa-circle fa-stack-2x');\n\n            let iconInfo = document.createElement('i');\n            iconInfo.setAttribute('class', 'fa fa-info fa-stack-1x fa-inverse');\n\n            infomark.appendChild(circleInfo);\n            infomark.appendChild(iconInfo);\n\n            socialContainer.appendChild(infomark);\n            //localise\n            let instructions = document.getElementById('instructions');\n            let instructionsText0 = _(window.indicators[0].info);\n\n            let no = new Image();\n            no.src = 'img/no.gif';\n\n            instructions.innerHTML = \"\";\n\n            instructions.appendChild(document.createTextNode(instructionsText0));\n\n\n            //alert(instructionsText0);\n            //add informations\n\n            let informationsHeader = document.getElementById('instructions-header');\n            informationsHeader.insertBefore(document.createTextNode(_('instructions-header')), informationsHeader.firstChild);\n\n        }\n\n\n        let embed = document.createElement('span');\n        embed.setAttribute('class', 'fa-layers fa-fw fa-2x');\n        embed.setAttribute('data-toggle', 'modal');\n        embed.setAttribute('data-target', '#container-modal-embed');\n        embed.setAttribute('data-tooltip', 'tooltip');\n        embed.setAttribute('data-placement', 'top');\n        embed.setAttribute('title', _('embed-icon'));\n\n        let circleEmbed = document.createElement('i');\n        circleEmbed.setAttribute('class', 'fas fa-circle');\n        let iconEmbed = document.createElement('i');\n        iconEmbed.setAttribute('class', 'fas fa-code fa-inverse');\n        iconEmbed.setAttribute('data-fa-transform', 'shrink-7');\n\n        embed.appendChild(circleEmbed);\n        embed.appendChild(iconEmbed);\n\n        socialContainer.appendChild(embed);\n\n\n        let twitter = document.createElement('span');\n        twitter.setAttribute('class', 'fa-layers fa-2x');\n        twitter.setAttribute('data-tooltip', 'tooltip');\n        twitter.setAttribute('data-placement', 'top');\n        twitter.setAttribute('title', _('twitter-icon'));\n        twitter.setAttribute('id', 'twitterButton');\n\n        let circleTwitter = document.createElement('i');\n        circleTwitter.setAttribute('class', 'fas fa-circle');\n\n        let iconTwitter = document.createElement('i');\n        iconTwitter.setAttribute('class', 'fab fa-twitter fa-inverse');\n        iconTwitter.setAttribute('data-fa-transform', 'shrink-7 down-.25 right-.25');\n\n        twitter.appendChild(circleTwitter);\n        twitter.appendChild(iconTwitter);\n\n        let twitterLink = document.createElement('a');\n        twitterLink.appendChild(twitter);\n        let twitterHashtags = encodeURIComponent(_(\"twitter-hashtags\"));\n        twitterLink.addEventListener('click', () => {\n  \n            const chapter = window.indicators[0].code.replace(/\\./g, '_');\n            var sharingText = _(`indicator${chapter}.sharing.text`);\n            window.open('https://twitter.com/intent/tweet?' +\n                \"hashtags=\" + encodeURIComponent(_(`indicator${chapter}.sharing.hashtags`)) +\n                '&text=' + sharingText + //' pic.twitter.com/xtihHf0oZn' +            \n                '&original_referer=' + currentLocation +\n                '&tw_p=tweetbutton&' +\n                'url=' + currentLocation + '',\n                '_blank',\n                'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');\n            return false;\n        });\n\n        socialContainer.appendChild(twitterLink);\n\n        let fb = document.createElement('span');\n        fb.setAttribute('class', 'fa-layers fa-fw fa-2x');\n        fb.setAttribute('data-tooltip', 'tooltip');\n        fb.setAttribute('data-placement', 'top');\n        fb.setAttribute('title', _('facebook-icon'));\n\n        let circleFacebook = document.createElement('i');\n        circleFacebook.setAttribute('class', 'fas fa-circle');\n\n        let iconFacebook = document.createElement('i');\n        iconFacebook.setAttribute('class', 'fab fa-facebook-f fa-inverse');\n        iconFacebook.setAttribute('data-fa-transform', 'shrink-7');\n\n        fb.appendChild(circleFacebook);\n        fb.appendChild(iconFacebook);\n\n\n        let fbLink = document.createElement('a');\n        fbLink.appendChild(fb);\n        fbLink.addEventListener('click', () => {\n            let u = window.location.href;\n            let t = _('title');\n            let url = 'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(u) + '&t=' + encodeURIComponent(t);\n            window.open(url + '?redirect=facebook', 'sharer', 'toolbar=0,status=0,width=626,height=436');\n        });\n        socialContainer.appendChild(fbLink);\n\n        let embedContainer = document.getElementById('embed');\n        embedContainer.innerHTML = '<pre class=\"pre-scrollable\"><code>&lt;iframe width=\"100%\" height=\"800\" src=\"' + currentLocation + '\"&gt;&lt;/iframe&gt;</code></pre>';\n\n\n        let embedHeader = document.getElementById('embed-header');\n        embedHeader.innerHTML = '';\n        embedHeader.insertBefore(document.createTextNode(_('embed_instruction')), embedHeader.firstChild);\n\n        let closeButton = document.createElement('button');\n        closeButton.setAttribute('type', 'button');\n        closeButton.setAttribute('class', 'close');\n        closeButton.setAttribute('data-dismiss', 'modal');\n        closeButton.setAttribute('aria-label', _('close'));\n\n        let spanButton = document.createElement('span');\n        spanButton.setAttribute('aria-hidden', 'true');\n        spanButton.innerHTML = '&times';\n        closeButton.appendChild(spanButton);\n\n        embedHeader.appendChild(closeButton);\n\n\n    } else {\n        window.indicators = window.appData[currentId];\n        if (window.indicators[0].info) {\n\n            let infomark = document.createElement('span');\n            infomark.setAttribute('class', 'fa-stack');\n            infomark.setAttribute('data-toggle', 'modal');\n            infomark.setAttribute('data-target', '#container-modal-instructions');\n            infomark.setAttribute('data-tooltip', 'tooltip');\n            infomark.setAttribute('data-placement', 'bottom');\n            infomark.setAttribute('title', _('instructions-header'));\n\n            let circleInfo = document.createElement('i');\n            circleInfo.setAttribute('class', 'fa fa-circle fa-stack-2x');\n\n            let iconInfo = document.createElement('i');\n            iconInfo.setAttribute('class', 'fa fa-info fa-stack-1x fa-inverse');\n\n            infomark.appendChild(circleInfo);\n            infomark.appendChild(iconInfo);\n\n            socialContainer.appendChild(infomark);\n            //localise\n            let instructions = document.getElementById('instructions');\n            let instructionsText0 = _(window.indicators[0].info);\n\n            let no = new Image();\n            no.src = 'img/no.gif';\n\n            instructions.innerHTML = \"\";\n\n            instructions.appendChild(document.createTextNode(instructionsText0));\n\n\n            //alert(instructionsText0);\n            //add informations\n\n            let informationsHeader = document.getElementById('instructions-header');\n            informationsHeader.insertBefore(document.createTextNode(_('instructions-header')), informationsHeader.firstChild);\n\n        }\n\n        let iconFacebook = document.createElement('i');\n        iconFacebook.setAttribute('class', 'fab fa-facebook-f fa-3x fa-fw');\n        iconFacebook.setAttribute('style', 'margin-right: 5px;');\n\n        let textFacebook = document.createTextNode(_('facebook-icon'));\n\n        let fbLink = document.createElement('a');\n        fbLink.setAttribute('class', 'list-group-item');\n        fbLink.appendChild(iconFacebook);\n        fbLink.appendChild(textFacebook);\n\n        fbLink.addEventListener('click', () => {\n            let u = window.location.href;\n            let t = _('title');\n            let url = 'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(u) + '&t=' + encodeURIComponent(t);\n            window.open(url + '?redirect=facebook', 'sharer', 'toolbar=0,status=0,width=626,height=436');\n        });\n\n\n        let iconTwitter = document.createElement('i');\n        iconTwitter.setAttribute('class', 'fab fa-twitter fa-3x fa-fw');\n        iconTwitter.setAttribute('style', 'margin-right: 5px;');\n\n        let textTwitter = document.createTextNode(_('twitter-icon'));\n\n        let twitterLink = document.createElement('a');\n        twitterLink.setAttribute('class', 'list-group-item');\n        twitterLink.appendChild(iconTwitter);\n        twitterLink.appendChild(textTwitter);\n        twitterLink.setAttribute('id', 'twitterButton');\n\n        twitterLink.addEventListener('click', () => {\n            const chapter = window.indicators[0].code.replace(/\\./g, '_');\n            var sharingText = _(`indicator${chapter}.sharing.text`);\n            window.open('https://twitter.com/intent/tweet?' +\n                \"hashtags=\" + encodeURIComponent(_(`indicator${chapter}.sharing.hashtags`)) +\n                '&text=' + sharingText + //' pic.twitter.com/xtihHf0oZn' +            \n                '&original_referer=' + currentLocation +\n                '&tw_p=tweetbutton&' +\n                'url=' + currentLocation + '',\n                '_blank',\n                'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');\n            return false;\n        });\n\n\n\n        let embedContainer = document.createElement('pre');\n        embedContainer.setAttribute('class', 'pre-scrollable');\n        embedContainer.innerHTML = '<pre class=\"pre-scrollable\"><code>&lt;iframe width=\"100%\" height=\"800\" src=\"' + currentLocation + '\"&gt;&lt;/iframe&gt;</code></pre>';\n\n        let embedHeader = document.createElement('h6');\n        embedHeader.insertBefore(document.createTextNode(_('embed_instruction_2')), embedHeader.firstChild);\n\n        let embedSpace = document.createElement('br');\n\n        let share = document.createElement('span');\n        share.setAttribute('class', 'fa-layers fa-fw fa-2x');\n        share.setAttribute('data-tooltip', 'tooltip');\n        share.setAttribute('data-placement', 'top');\n        share.setAttribute('title', _('share-icon'));\n        share.setAttribute('data-toggle', 'modal');\n        share.setAttribute('data-target', '#container-modal-share');\n\n\n        let circleShare = document.createElement('i');\n        circleShare.setAttribute('class', 'fas fa-circle');\n\n        let iconShare = document.createElement('i');\n        iconShare.setAttribute('class', 'fas fa-share-alt fa-inverse');\n        iconShare.setAttribute('data-fa-transform', 'shrink-7');\n\n        share.appendChild(circleShare);\n        share.appendChild(iconShare);\n\n        socialContainer.innerHTML = '';\n        socialContainer.appendChild(share);\n\n\n        let shareHeader = document.getElementById('share-header');\n        shareHeader.innerHTML = '';\n\n        let closeButton = document.createElement('button');\n        closeButton.setAttribute('type', 'button');\n        closeButton.setAttribute('class', 'close');\n        closeButton.setAttribute('data-dismiss', 'modal');\n        closeButton.setAttribute('aria-label', _('close'));\n\n        let spanButton = document.createElement('span');\n        spanButton.setAttribute('aria-hidden', 'true');\n        spanButton.innerHTML = '&times';\n        closeButton.appendChild(spanButton);\n\n\n        shareHeader.insertBefore(document.createTextNode(_('share-header')), shareHeader.firstChild);\n        shareHeader.appendChild(closeButton);\n\n        let shareList = document.getElementById('share-list');\n        shareList.innerHTML = '';\n        shareList.appendChild(fbLink);\n        shareList.appendChild(twitterLink);\n        shareList.appendChild(embedSpace);\n        shareList.appendChild(embedSpace);\n        shareList.appendChild(embedHeader);\n        shareList.appendChild(embedContainer);\n\n    }\n    $('[data-tooltip=\"tooltip\"]').tooltip();\n\n}","import {\n  storage\n} from '../storage'\nimport requestData from '../dataservice'\nimport {\n  _,\n  localizeHTMLTag,\n  getParameterValue,\n  translateAll\n} from '../lang'\nimport {\n  localiseInterface\n} from '../localizeservice'\nimport {\n  xml\n} from 'd3-request'\nimport {\n  select\n} from 'd3-selection'\nimport {\n  processDataForCategory,\n  processData,\n  indicatorClick,\n  CHECKED_FA_HTML,\n  UNCHECKED_FA_HTML,\n  currentCategory,\n  selectedSortProperty,\n  selectedSortDirection,\n  groups,\n  currentSorting,\n  setcurrentSortingCS,\n  selectedSortPropertyCS,\n  selectedSortDirectionCS,\n  changeParams\n} from '../main'\n\nconst config = require ('../../../../configs/configuration.js')\nconst constants = config.configuration.data;\nvar indicators;\n\n/* \nUI To change indicator : \nCHECKBOXES\n*/\n\nexport function createIndSelectionCheckBoxes() {\n  indicators = window.indicators;\n  $(\"#chartInd\").html(\"<div id=\\\"sortContainer\\\"></div>\");\n\n  $(\"#sortContainer\").empty();\n  if (indicators.length > 1) {\n      indicators = window.indicators;\n      for (var [index, entry] of indicators.entries()) {\n          const chapter = entry.code.replace(/\\./g, '_')\n          const hoverTitle = `indicator${chapter}.hoverTitle`\n          var code = index;\n          var title = _(hoverTitle);\n          var checked = index == 0;\n\n          if (checked) {\n              $(\"#sortContainer\").append('<div class=\"checkbox checkbox-success\" data-checked=\"true\" id=\"checkbox' + index + '\">' + CHECKED_FA_HTML + '<label for=\"checkbox' + code + '\">' + title + '</label></div>');\n          } else {\n              $(\"#sortContainer\").append('<div class=\"checkbox checkbox-success\" id=\"checkbox' + index + '\">' + UNCHECKED_FA_HTML + '<label for=\"checkbox' + code + '\">' + title + '</label></div>');\n          }\n      }\n      handleIndCheckbox();\n  }\n}\n\nfunction handleIndCheckbox() {\n  $(\".checkbox\").click(function() {\n      if ($(this).attr(\"data-checked\") === \"true\") {\n          return false;\n      };\n\n      // need to change the div content of each.\n      updateCheckboxes(this);\n\n      // get category and load the data\n      var category = $(this).attr(\"id\").replace('checkbox', '');\n      indicatorClick(category);\n  });\n}\n\nfunction updateCheckboxes(activeElement) {\n  // there can only be one active element:\n  $(\".checkbox\").not(activeElement).attr(\"data-checked\", \"false\");\n  $(activeElement).attr(\"data-checked\", \"true\");\n\n  // change all checkboxes to have content as if not checked. \n  $(\".checkbox\").find('span').remove();\n  $(\".checkbox\").not(activeElement).prepend(UNCHECKED_FA_HTML);\n\n  // find the one that is checked, and set it's content to checked.\n  $(activeElement).prepend(CHECKED_FA_HTML);\n}\n/* \nUI To change indicator : \nBIG SQUARE ICONS\n*/\n\nexport function createIndSelectionBigIcons() {\n  indicators = window.indicators;\n  if (indicators.length == 1) {\n      return;\n  }\n\n  'use strict'\n\n  // get container\n  const iconsContainer = document.getElementById('icons-container')\n\n  // remove visible tooltips, after clearing innerHTML no longer accessible\n  $('[data-tooltip=\"tooltip\"]').tooltip('dispose')\n\n  // recreate\n  iconsContainer.innerHTML = ''\n\n  // add icons dynamically based on chapter information\n  for (var [index, entry] of indicators.entries()) {\n      const chapter = entry.code.replace(/\\./g, '_')\n\n      const iconSrc = require(`../../img/${chapter}.svg`)\n      // d3.xml(iconSrc, function (xml) {\n      // xml(iconSrc, function (xml) {\n      //   let icon = document.importNode(xml.documentElement, true)\n      const icon = new window.Image()\n      icon.src = iconSrc\n      icon.setAttribute('style', 'width: 55px; height: 55px;')\n\n      // d3.select('div#icons-container')\n      // select('div#icons-container')\n      //   .each(function () {\n      let div = document.createElement('button')\n      if (index === window.categorySelected) {\n          div.setAttribute('class', 'btn btn-default btn-xl icon-active')\n          div.setAttribute('style', `background-color: ${constants.iconColorSelected}`)\n      } else {\n          div.setAttribute('class', 'btn btn-default btn-xl icon-nonactive')\n          div.setAttribute('style', `background-color: ${constants.iconColorNotSelected}`)\n\n          $(div).hover(function() {\n              $(this).css('background-color', constants.iconColorSelected)\n          }, function() {\n              $(this).css('background-color', constants.iconColorNotSelected)\n          })\n\n          div.onclick = createOnClick(index)\n      }\n\n      const hoverTitle = `indicator${chapter}.hoverTitle`\n      div.setAttribute('title', _(hoverTitle))\n      div.setAttribute('data-tooltip', 'tooltip')\n      div.setAttribute('data-placement', 'top')\n      div.setAttribute('container', 'body')\n      div.setAttribute('role', 'tooltip')\n      div.setAttribute('id', chapter)\n      div.appendChild(icon)\n\n      iconsContainer.appendChild(div)\n\n  }\n\n  // activate all tooltips\n  $('[data-tooltip=\"tooltip\"]').tooltip({\n      container: '#dummy'\n  })\n}\nexport function createOnClick(category) {\n  return function() {\n      $.when(requestData(category)).done(function() {\n          window.categorySelected = category\n          const data = storage.processedData[category]\n          createIndSelectionBigIcons()\n\n          // localise\n          localiseInterface(category);\n          processDataForCategory(category);\n          //drawLinechart(data, 'linechart', category)\n      })\n  }\n}\n\n/* \nUI To change indicator : \nSELECTBOX\n*/\n\nexport function createIndSelectionSelectbox() {\n\n  $(\"#selectIndi\").show();\n  $(\"#selectIndi\").empty();\n  $(\"#selectIndi\").unbind('click');\n\n  var indicators = window.indicators;\n  var iterator = 0;\n  for (var [index, entry] of indicators.entries()) {\n      const chapter = entry.code.replace(/\\./g, '_')\n      const hoverTitle = `indicator${chapter}.hoverTitle`\n      $(\"#selectIndi\").append('<option value=\"' + iterator + '\">' + _(hoverTitle) + '</option>');\n      iterator++;\n  }\n  $('#selectIndi').selectpicker();\n\n  $(\"#selectIndi\").change(function() {\n      var category = $('#selectIndi option:selected').val();\n      indicatorClick(category);\n\n  });\n}\n\nexport function buildCustomList() {\n  var indicators = window.indicators;\n  const paramIndicator = indicators[currentCategory];\n  const params = paramIndicator.params;\n\n  for (var key in params) {\n      const valuesArr = params[key];\n      if (valuesArr[\"type\"] == \"list\") {\n\n          var sel = $('<select>').attr(\"id\", valuesArr[\"listId\"]).attr(\"style\", \"display:none\").appendTo(valuesArr[\"conteiner\"]);\n          $(valuesArr[\"items\"]).each(function() {\n              sel.append($(\"<option>\").attr('value', this.code).text(_(this.title)));\n          });\n          sel.val(getParameterValue(valuesArr.urlParam));\n          sel.on(\"change\", function() {\n            var currentCode = this.value;\n            var itemObj = valuesArr[\"items\"].find( el => el.code === currentCode);\n            var countries2Ignore = itemObj.exculdeCountry;\n              changeParams(key, this.value);\n              delete storage.processedData[window.categorySelected];\n              jQuery.when(requestData(window.categorySelected)).done(function() {\n                  processData(window.categorySelected, currentSorting, countries2Ignore);\n              });\n\n          })\n\n          $(\"#\" + valuesArr[\"listId\"]).selectpicker(getParameterValue(valuesArr.visibleParam) == \"false\" ? \"hide\" : \"show\");\n          if (getParameterValue(valuesArr.visibleParam) == \"false\") {\n              //$(\"#dropdown-container\").addClass(\"disabled\");\n          }\n\n      }\n  }\n\n}\n\n/* Sorting */\nexport function checkSortIcons(selectedSortProperty, selectedSortDirection) {\n  $('.sort')\n\n      .off('click')\n\n      .on('click', applySort)\n\n\n  // check, which icons to display for the sorts!\n\n  $('.sort i')\n\n      .removeClass('fa-sort')\n\n      .removeClass('fa-sort-down')\n\n      .removeClass('fa-sort-up')\n\n  $('#sort_' + selectedSortProperty + ' i').addClass('fa-sort-down')\n\n  $('#sort_' + selectedSortProperty + ' i').attr(\n\n      'title',\n\n      selectedSortDirection === 'desc' ? _('sort.hover.ascending') : _('sort.hover.descending')\n\n  )\n\n  $('.sort i').each(function(idx, element) {\n\n      if (!$(element).hasClass('fa-sort-down') && !$(element).hasClass('fa-sort-up')) {\n\n          $(element).addClass('fa-sort')\n\n      }\n\n  })\n\n}\n\nexport function applySort(event) {\n\n  var indicators = window.indicators;\n\n  event.stopPropagation();\n  event.preventDefault();\n  var e = event.currentTarget.id;\n  var g = selectedSortDirection;\n  var p = selectedSortProperty;\n\n  e = e.substr(5, e.length - 1);\n\n  g = p === e ? \"desc\" === g ? \"asc\" : \"desc\" : (p = e, \"desc\")\n\n  const grouping = indicators[currentCategory].grouping;\n\n  var index = groups.indexOf(e);\n\n  setcurrentSortingCS(grouping.groups[index].code);\n  selectedSortPropertyCS(e);\n  selectedSortDirectionCS(g);\n\n  processData(window.categorySelected, currentSorting, g);\n\n}\nexport {\n  selectedSortProperty,\n  selectedSortDirection,\n  currentSorting\n\n};","import {\n    currentCategory\n} from '../main'\n\n\nexport function isIE(userAgent) {\n    userAgent = userAgent || navigator.userAgent;\n    return userAgent.indexOf(\"MSIE \") > -1 || userAgent.indexOf(\"Trident/\") > -1 || userAgent.indexOf(\"Edge/\") > -1;\n}\n\nexport function inIframe() {\n    console.log(\"disregardSimpleMode  = \"+this.currentIndicator.disregardSimpleMode);\n    //return true;\n    if ((currentCategory != undefined && window.indicators) && window.indicators[currentCategory].hideTopBarForIframe == true) {\n        return false;\n    }\n\n    //return true;\n    try {\n        return window.self !== window.top;\n    } catch (e) {\n        return true;\n    }\n}\nexport function isMobileDevice() {\n    'use strict'\n    return (typeof window.orientation !== 'undefined') || (navigator.userAgent.indexOf('IEMobile') !== -1)\n}\n\n\nexport function nbOfDavaAvailableForCountries(data, countries) {\n    var countriesMSWithData = 0;\n    $(countries).each(function(key, value) {\n        var arrayResults = new Array();\n        var result = $.map(data, function(valueData, index) {\n            if (valueData.Geo == value.toUpperCase()) {\n                countriesMSWithData++;\n            }\n        });\n    })\n    return countriesMSWithData;\n}\nexport function roundValue(value, precision = 1) {\n    return value ? parseFloat(value).toFixed(precision): \"0\";\n\n}\n\nexport function compare(key) {\n\n    return function(a, b) {\n        let valueA = parseFloat(a[key]);\n        let valueB = parseFloat(b[key]);\n        let ascending = false;\n\n        if (valueA === null) {\n            return 1;\n        } else if (valueB === null) {\n            return -1;\n        } else if (valueA === valueB) {\n            return 0;\n        } else if (ascending) {\n            return valueA < valueB ? -1 : 1;\n        } else if (!ascending) {\n            return valueA < valueB ? 1 : -1;\n        }\n\n        if (valueA == undefined || valueB == undefined) {\n            return 1;\n        }\n\n        let comparison = 0;\n        if (valueA > valueB) {\n            comparison = 1;\n        } else if (valueA < valueB) {\n            comparison = -1;\n        }\n        return comparison;\n    }\n}\n\nexport function removeParam(key, sourceURL) {\n    var rtn = sourceURL.split(\"?\")[0],\n        param,\n        params_arr = [],\n        queryString = (sourceURL.indexOf(\"?\") !== -1) ? sourceURL.split(\"?\")[1] : \"\";\n    if (queryString !== \"\") {\n        params_arr = queryString.split(\"&\");\n        for (var i = params_arr.length - 1; i >= 0; i -= 1) {\n            param = params_arr[i].split(\"=\")[0];\n            if (param === key) {\n                params_arr.splice(i, 1);\n            }\n        }\n        rtn = rtn + \"?\" + params_arr.join(\"&\");\n    }\n    return rtn;\n}\nexport function isMobile () {\n    let check = false;\n    (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);\n    return check;\n}\n\n","/*global JSONstat:false */\nconst config = require ('../../../configs/configuration.js')\nconst constants = config.configuration.data;\n\nimport { storage } from './storage';\nimport JSONstat from 'jsonstat';\nimport extractData from './extracts/extract';\nimport {removeParam} from './components/utils'\n\nvar indicators;\n\nfunction queryService(category) {\n    indicators = window.indicators;\n    'use strict';\n\n    const environment = storage.NODE_ENV;\n\n    //create the countries\n    const countries = constants.countries;\n\n    var countries2remove = indicators[category].countries2Remove;\n    for (var country2remove of countries2remove) {\n        var index = countries.indexOf(country2remove);\n        if (index > -1) {\n            countries.splice(index, 1);\n        }\n    }\n    let countriesUrl = '';\n    for (var country of countries) {\n        countriesUrl += `&geo=${country}`;\n    }\n\n    //retrieve correct webservice endpoint depending on environment\n    const jsonURL = constants[`url_${environment}`];\n\n\n    //create time\n\n    const timeIndicators = indicators[category].periods;\n    let timeUrl = '';\n    for (var time of timeIndicators) {\n        timeUrl += `&time=${time}`;\n    }\n\n    //create parameters which need to be added to request\n    let paramUrl = '?';\n    const paramIndicator = indicators[category];\n    const params = paramIndicator.params;\n\n    for (var key in params) {  \n        var valuesArr = params[key];\n        if (valuesArr[\"selected\"]) {\n            valuesArr = [valuesArr.selected];\n            /*valuesArr = $.map( valuesArr.items, function( val, i ) {\n                return val.code;\n              });*/\n        }\n        for (var value of valuesArr) {\n                paramUrl += `${key}=${value}&`;\n        }\n    }\n    paramUrl = paramUrl.slice(0, paramUrl.length -1 );\n\n    //assemble URL\n    let url; // = jsonURL + constants.lang + '/' + constants.dataUrls[category] + countriesUrl + timeUrl;\n    if (environment !== 'local' && environment !== 'dev_serve') {\n        url = jsonURL + indicators[category].table + paramUrl + countriesUrl + timeUrl;\n        //url = jsonURL + constants.lang + '/'+\"sbs_sc_sca_r2?nace_r2=B-N_S95_X_K&precision=1&size_emp=0-9&size_emp=10-19&size_emp=20-49&size_emp=50-249&size_emp=GE250&size_emp=TOTAL&indic_sb=V11110\";\n        if (paramUrl.includes(\"precision\")) {\n            url = removeParam(\"precision\", url);\n            url+= constants[\"url_settings\"];\n        }else {\n            \n        }\n\n    } else {\n        const pos = constants.dataUrls[category].indexOf('?');\n        let datasetName;\n\n        if (pos !== -1) {\n            datasetName = constants.dataUrls[category].substr(0, pos);\n        } else {\n            datasetName = constants.dataUrls[category];\n        }\n\n        url = jsonURL + datasetName + '.json';\n    }\n\n\n    return jQuery.ajax({\n        type: 'GET',\n        url: url,\n        contentType: 'application/json; charset=utf-8',\n        dataType: 'json',\n        crossDomain: true,\n        cache: true,\n        timeout: 30000,\n        processData: false,\n        data: ''\n    }).done(function (data) {\n        storage.rawData[category] = data;\n    }).fail(function (jqXHR, textStatus, errorThrown) {console.log(\"error WS\");\n        jQuery('#graph-container').empty();\n        jQuery('#graph-container').append('<div style=\\'text-align: center; vertical-align: middle;\\'>There was an error retrieving data.<br />Please try again in a few minutes.</div>');\n        jQuery('#graph-container').text('There was an error retrieving data. Please try again in a few minutes.');\n        jQuery('#loader').hide();\n    });\n}\n\n\nfunction assembleData(category) {\n    'use strict';\n\n    // let paramObj = constants.paramObj[category],\n    const paramIndicator = indicators[category];\n    const params = paramIndicator.params;\n\n    let paramObj = {}, \n        data = [],\n        countries = constants.countries;\n        var countries2remove = indicators[category].countries2Remove;\n        for (var country2remove of countries2remove) {\n            var index = countries.indexOf(country2remove);\n            if (index > -1) {\n                countries.splice(index, 1);\n            }\n        }\n\n        const jsonStat = JSONstat(storage.rawData[category]);\n        const jsonData = jsonStat.Dataset(0);\n\n        //fill paramObj\n        for (var key in params) {        \n            const valuesArr = params[key];\n            if (valuesArr[\"selected\"]) {\n                 valuesArr = [valuesArr.selected];\n            }\n    \n            for (var value of valuesArr) {      \n                paramObj[key] = value;\n            }\n        }\n        paramObj.dataset = paramIndicator.table;\n        data = extractData(countries, jsonData, paramObj, category, paramIndicator.params.size_emp);\n\n    return data;\n\n}\n\n\nexport default function requestData(category) {\n    'use strict';\n\n    if (storage.processedData[category]){\n        return storage.processedData[category];\n    } else {\n            // Array of requests\n    let requests = [];\n\n    requests.push(queryService(category));\n\n\n    let defer = $.when.apply($, requests);\n    return defer.done(function () {\n\n        // This is executed only after all ajax request have been completed\n        // for (const [index, para] of Array.from(constants.paramObj).entries()) {\n        //     storage.processedData[index] = assembleData(index);\n        // }\n        storage.processedData[category] = assembleData(category);\n    });\n    }\n\n\n}","export default function extractData(countries, ds, paramObj, category, sizes) {\n    const config = require ('../../../../configs/configuration.js')\n    const constants = config.configuration.data;\n    'use strict';\n\n    let collection = {};\n    let data = [];\n    const timeIndicators = indicators[category].periods;\n    const grouping = indicators[category].grouping;\n\n    var arrayNoData = [];\n   // console.log(grouping);\n    var value = 0;\n   \n\n    for (var country of countries) {\n        // collection[country] = country;\n        paramObj.geo = country;\n        var times = [];  \n        for (var time of timeIndicators) {\n            var value = {}; \n            var total = 0;\n            var calculatedTotal = 0;\n            data = [];\n            var hasUndefined = false; \n\n            if (grouping.process == \"CALCULATEDTOTAL%\") {\n                for (var groupIndex in grouping.groups) {\n                    var groupCode = grouping.groups[groupIndex].code;\n                    value.year = time;  \n                    value.Geo = country;\n                    const paramsType = grouping.groups[groupIndex].elems;\n                    var sum = 0;\n    \n                    for (var paramItem in paramsType) {\n                        paramObj.time = time;\n                        paramObj[grouping.paramName] = paramsType[paramItem];\n\n                        const valueTmp = ds.Data(paramObj).value;\n                        if (valueTmp != undefined) {\n                            calculatedTotal+= parseFloat(valueTmp)\n                        }\n                    }\n                }\n            }\n\n            \n            for (var groupIndex in grouping.groups) {\n                var groupCode = grouping.groups[groupIndex].code;\n                value.year = time;  \n                value.Geo = country;\n                const paramsType = grouping.groups[groupIndex].elems;\n                var sum = 0;\n\n\n                for (var paramItem in paramsType) {\n                    paramObj.time = time;\n                    paramObj[grouping.paramName] = paramsType[paramItem];\n\n                    const valueTmp = ds.Data(paramObj).value;\n                    //console.log(\"value country : \"+country+\"  :  \"+valueTmp);\n                    if (valueTmp == undefined) {\n                        hasUndefined = true;\n                       \n                    }else {\n                        sum += parseFloat(valueTmp);\n                    }\n                    /*\n                    console.log(\"***************\");\n                    console.log(\"Country = \"+country+\"   Param = \"+grouping.paramName+\" value = \"+paramsType[paramItem]+\"   value = \"+valueTmp+\"   Sum  = \"+sum);\n                    */\n                }\n                if (grouping.process == \"TOTAL%\" || grouping.process == \"CALCULATEDTOTAL%\") {\n                    //console.log(\"%total\");\n                    var valueTot;\n                    if (grouping.process == \"CALCULATEDTOTAL%\") {\n                        valueTot = calculatedTotal;\n                    }else {\n                        paramObj[grouping.paramName] = \"TOTAL\";\n                        valueTot = ds.Data(paramObj).value;\n                    }\n                    if (grouping.groups[groupIndex].process) {\n                        if (grouping.groups[groupIndex].process == \"TOTAL-\") {\n                            sum = ((valueTot - sum)/valueTot)*100;\n                        }\n                    }else {\n                        sum = (sum/valueTot)*100;\n                    }\n                    /*\n                    console.log(\"Process = \"+grouping.process);\n                    console.log(\"Sum = \"+sum);\n                    console.log(\"Total = \"+valueTot); \n                    console.log(\"Calculated Total = \"+calculatedTotal); \n                    console.log(\"Sum % = \"+sum);\n                    */\n                }\n  \n                if (indicators[category].showWithUndefined) {\n                    //console.log(\"show With undefined\");\n                    value[groupCode] = sum;\n                }else {\n                    value[groupCode] = hasUndefined ? undefined : sum;\n                }\n                \n                //value[groupCode] = sum;\n         \n                total+= sum;\n                value.Total = total;\n                \n                data = value;\n\n            } \n            if (hasUndefined) {\n               // console.log (\"Undefined = \"+country);\n               // console.log(data);\n            }\n            if (hasUndefined == false || indicators[category].showWithUndefined) {\n                //console.log(\"add data \"+ country);\n                collection[country] = data; \n            }else {\n\n                arrayNoData.push(country);\n            }\n        }\n\n        data = [];\n    }\n    if (indicators[category].calculateEU) {\n        var calculatedEU = {};\n        var value = {}; \n        var total = 0;\n        for (var country of indicators[category].calculateEU.countries) {\n            // collection[country] = country;\n            paramObj.geo = country;\n            var times = [];  \n            for (var time of timeIndicators) {\n   \n      \n\n                var sum;\n                var hasUndefined = false;\n                for (var groupIndex in grouping.groups) {\n                    var groupCode = grouping.groups[groupIndex].code;\n                    value.year = time;  \n                    value.Geo = country;\n                    const paramsType = grouping.groups[groupIndex].elems;\n                    var sum = 0;\n                    for (var paramItem in paramsType) {\n                        paramObj.time = time;\n                        paramObj[grouping.paramName] = paramsType[paramItem];\n    \n                        const valueTmp = ds.Data(paramObj).value;\n                        if (valueTmp == undefined) {\n                            hasUndefined = true;\n                        }else {\n                            sum += parseFloat(valueTmp);\n                        }\n                    }\n    \n                    data[groupCode] = data[groupCode] == undefined ? sum: data[groupCode] + sum;\n                    //console.log(\"********* \"+country+\"  : \"+sum+\"   *******  Total : \"+total+\"  *****\");\n                    //console.log(data);\n    \n                } \n                paramObj[grouping.paramName] = \"TOTAL\";\n                const totalTmp = ds.Data(paramObj).value;\n                total+= totalTmp;\n\n            }\n        }\n        data.Geo = indicators[category].calculateEU.code;\n        data.Total = total;\n        //console.log(\"After loop\");\n        //console.log(data);\n        calculatedEU = data;\n\n        if (grouping.process == \"TOTAL%\") {\n            const paramsType = grouping.groups[0].elems;\n            for (var key in data) {\n                if (key != \"year\" && key != \"Geo\" && key != \"Total\") {\n                data[key] = data[key]/data[\"Total\"]*100;\n                }\n            }\n            data[\"Total\"] = 100;\n\n        }\n        var collectionTmp = collection;\n        var code = indicators[category].calculateEU.code;\n        collection = {code : data};\n        for (var strKey in collectionTmp) {\n            collection[strKey] = collectionTmp[strKey];\n        }\n        //console.log(collection);\n        //console.log(data);\n        //collection.push(...collectionTmp);\n        //collection[\"EU28\"] = data; \n\n    }\n    //console.log(\"Data processed\")\n    //console.log(collection);\n    collection.time = timeIndicators;\n    if (window.parent !== window && window.parent.disableCountries) { \n        window.parent.disableCountries(arrayNoData)\n      }\n    return collection;\n}\n ","\r\nimport l10njs from 'l10n.js';\r\n\r\nfunction _ (string) {\r\n    'use strict';\r\n\r\n    return string.toLocaleString();\r\n}\r\n \r\nfunction localizeHTMLTag(tagId, useLabel) {\r\n    'use strict';\r\n    let tag = document.getElementById(tagId);\r\n    if (tag && tag.src) {\r\n        tag.title = _(tag.title);\r\n    } else {\r\n        if (!useLabel) {\r\n        tag.innerHTML = _(tag.innerHTML);\r\n    } else {\r\n        tag.innerHTML = _(useLabel);\r\n    }\r\n    }\r\n}\r\n\r\n/* To replace the structure <span translate=\"XX\"></span> by the corresponding translation of the text with ID=XX */\r\nfunction translateAll() {\r\n    var translationAttribute  = \"translate\";\r\n\t$('span['+translationAttribute+']').each(function(idx){\r\n\r\n        // get the value of the attribute.\r\n        var translateId = $(this).attr(translationAttribute);\r\n        var translatedValue = _(translateId);\r\n\r\n        if(translatedValue === undefined){\r\n            console.log(\"Translation for \"+ translateId + \" not found.\");\r\n        }\r\n\r\n        // now replace the span's text with the translation:\r\n        $(this).html(translatedValue);\r\n    });\r\n}\r\n \r\nfunction getParameterValue(parameter) {\r\n    'use strict';\r\n    parameter = parameter.replace(/[\\[]/, \"\\\\\\[\").replace(/[\\]]/, \"\\\\\\]\");\r\n    let regexS = \"[\\\\?&]\" + parameter + \"=([^&#]*)\";\r\n    let regex = new RegExp(regexS);\r\n    let results = regex.exec(window.location.href);\r\n    if(results === null) {\r\n        return '';\r\n    } else {\r\n        return results[1];\r\n    }\r\n        \r\n}\r\n\r\nexport {\r\n    _,\r\n    localizeHTMLTag,\r\n    getParameterValue,\r\n    translateAll\r\n};","\nconst config = require ('../../../configs/configuration.js')\nconst constants = config.configuration.data;\nvar indicators;\n\nimport { _, getParameterValue } from './lang';\n\nfunction setupLocalisation() {\n    'use strict';\n\n    String.locale = window.defaultLanguage;\n    String.toLocaleString(window.availableLanguages);\n    let lang = getParameterValue('lang');\n    if (lang !== '' && lang !== \"\") {\n        for (var value in window.availableLanguages) {\n            if (value === lang) {\n                String.locale = lang;\n            }\n        }\n    }\n\n}\n\nfunction localise (category = 0) {\n    indicators = window.indicators; \n    document.title = _(\"document.title\");\n    \n    const indicator = indicators[category];  \n    const chapter = indicator.code.replace(/\\./g, '_');\n\n    const mainTitleString = `indicator${chapter}.title`;\n    const mainTitle = document.getElementById('chart_title');\n    mainTitle.innerHTML = _(mainTitleString);\n    document.title = _(mainTitleString).split(\",\")[0];\n\n    const subTitleString = `indicator${chapter}.subTitle`;\n    const subTitle = document.getElementById('chart_subtitle');\n    subTitle.innerHTML = _(subTitleString);\n\n    const footnoteString = `indicator${chapter}.footnote`;\n    const footnote = document.getElementById('footnote');\n    footnote.innerHTML = _(footnoteString);\n\n    //bookmark \n    const link = _(indicator.bookmarkText);\n    let areaLink = document.createElement('a');\n    var linkText = typeof indicator.sourceText == \"function\" ?  indicator.sourceText() : _(indicator.sourceText);\n\n    let areaLinkText = document.createTextNode(linkText);\n    let areaLinkLink = 'bookmarklink';\n\n    areaLink.setAttribute('target', '_blank');\n    areaLink.setAttribute('href', indicator.bookmark);\n    areaLink.setAttribute('class', 'infolink');\n    areaLink.appendChild(areaLinkText);\n        \n\n    let linkContainer = document.getElementById('bookmark-link');\n    linkContainer.innerHTML = link;\n    linkContainer.appendChild(areaLink);\n\n}\n\n\nfunction localiseInterface(category) {\n    'use strict';    \n    try {\n        localise(category);\n    } catch (exp) {\n        console.log(exp);\n    }\n\n}\n\nexport {\n    setupLocalisation,\n    localiseInterface\n};","import 'core-js'\r\nimport 'regenerator-runtime/runtime'\r\n\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport 'billboard.js/dist/billboard.css';\r\nimport '../styles/main.css';\r\nimport '../styles/icons.css';\r\nimport '../styles/social.css';\r\nimport '../styles/pub_specific.css';\r\n\r\nimport 'bootstrap-select-v4';\r\nimport bootStrapCss from '../../node_modules/bootstrap-select-v4/dist/css/bootstrap-select.min.css';\r\nimport dropdowncss from '../styles/dropdown.css';\r\n\r\nconst appData = require('../../../configs/' + project + '/' + appid+'/indicator.js');\r\nconst configFile = require ('../../../configs/configuration.js')\r\nconst constants = configFile.configuration.data;\r\n\r\n\r\nimport 'jquery-csv';\r\n\r\nwindow.data = configFile;\r\nwindow.currentId = appid;\r\nwindow.indicators = appData.visData;\r\n\r\nimport * as d3 from \"d3\";\r\nimport {\r\n    library,\r\n    dom\r\n} from '@fortawesome/fontawesome-svg-core';\r\nimport {\r\n    faTwitter,\r\n    faFacebookF\r\n} from '@fortawesome/free-brands-svg-icons';\r\nimport {\r\n    faSquare as faSolidSquare,\r\n    faCircle,\r\n    faShareAlt,\r\n    faSpinner,\r\n    faInfo,\r\n    faCode,\r\n    faCheck,\r\n    faSortUp,\r\n    faSortDown,\r\n    faSort,\r\n\r\n} from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport {\r\n    faSquare as faRegularSquare,\r\n    faCheckSquare\r\n} from '@fortawesome/free-regular-svg-icons';\r\n\r\nimport {\r\n    _,\r\n    localizeHTMLTag,\r\n    getParameterValue,\r\n    translateAll\r\n} from './lang';\r\nimport {\r\n    bb\r\n} from 'billboard.js';\r\nimport createSocial from './components/social';\r\nimport {\r\n    setupLocalisation,\r\n    localiseInterface\r\n} from './localizeservice';\r\nimport requestData from './dataservice';\r\n\r\nimport {\r\n    storage\r\n} from './storage';\r\nimport {\r\n    isIE,\r\n    nbOfDavaAvailableForCountries,\r\n    roundValue,\r\n    compare,\r\n    inIframe,\r\n    TestClass,\r\n    isMobile\r\n} from './components/utils';\r\nimport {\r\n    createIndSelectionCheckBoxes,\r\n    createIndSelectionBigIcons,\r\n    createIndSelectionSelectbox,\r\n    buildCustomList,\r\n    checkSortIcons,\r\n    applySort\r\n\r\n} from './components/ui-component';\r\n\r\nlibrary.add(faTwitter, faFacebookF, faCircle, faSolidSquare, faRegularSquare, faShareAlt, faSpinner, faInfo, faCode, faCheck, faCheckSquare, faSortUp, faSortDown, faSort);\r\n\r\nconst CHECKED_FA_HTML = '<span class=\"fa-layers\"><i class=\"fas fa-square\" data-fa-transform=\"grow-8\"></i><i class=\"fas fa-check fa-inverse\" data-fa-transform=\"shrink-2\"></i></span>';\r\nconst UNCHECKED_FA_HTML = '<span class=\"fa-layers\"><i class=\"far fa-square\" style=\"color:grey\" data-fa-transform=\"grow-8\"></i></span>';\r\n\r\n/*\r\n\r\nvar defaultAppId = \"eumove_01_01_01\";\r\nvar appId = getParameterValue(\"id\") == \"\" ? defaultAppId : getParameterValue(\"id\");\r\n\r\nvar appsId = Object.keys(window.appData);\r\nvar currentId = defaultAppId;\r\n\r\nvar urlPaths = window.location.href.split(\"/\");\r\nvar urlLastFolder = urlPaths[urlPaths.length - 2];\r\nurlLastFolder = urlLastFolder.replace(\"DIR_\", \"\");\r\n\r\nif (getParameterValue(\"id\") != \"\" && inIframe() == false) {\r\n    currentId = getParameterValue(\"id\");\r\n} else if (appsId.indexOf(urlLastFolder) != -1) {\r\n    currentId = urlLastFolder;\r\n}\r\n\r\n\r\nwindow.currentId = currentId;\r\nwindow.indicators = window.appData[currentId];\r\n*/\r\n\r\nvar config = configFile.configuration;\r\n\r\nlet chart;\r\nvar UIComponentHeight;\r\nvar groupsNames = [];\r\nvar groups = [];\r\nvar groupsMapping = [];\r\nvar groupsColors = {};\r\nvar groupsTypes = {};\r\nvar dataColors;\r\nvar color;\r\nlet displayed;\r\nvar data;\r\nvar dataNotCorrected;\r\nvar arrayNotCorrected;\r\nvar arrayGrouped;\r\nvar dataColumns;\r\nvar countries = [];\r\nvar countriesCodes = [];\r\nvar arrayNoData = [];\r\nvar currentCategory = 0;\r\nvar currentSorting = \"\";\r\nvar selectedCountry = (getParameterValue(\"country\") != \"\" && getParameterValue(\"country\") != null) ? getParameterValue(\"country\") : \"\";\r\nlet selectedSortProperty = config.defaultSortProperty\r\nlet selectedSortDirection = config.defaultSortDirection\r\nlet hide = groups;\r\nlet legendItems;\r\nlet legendContent;\r\nlet legendHide = true;\r\nvar rtime;\r\nvar timeout = false;\r\nvar delta = 100;\r\nvar indexDataToNotTouch = null;\r\nvar dataFile = [];\r\nvar dataFileFiltered = [];\r\nvar simpleMode = indicators[currentCategory].disregardSimpleMode != null ? false : (getParameterValue(\"simple\") != null && getParameterValue(\"simple\") === \"true\");\r\n\r\n$(window).resize(function() {\r\n    rtime = new Date();\r\n    if (timeout === false) {\r\n        timeout = true;\r\n        setTimeout(resizeend, delta);\r\n    }\r\n});\r\n\r\nfunction resizeend() {\r\n    if (new Date() - rtime < delta) {\r\n        setTimeout(resizeend, delta);\r\n    } else {\r\n        timeout = false;\r\n       // alert('Done resizing');\r\n\t   resize();\r\n    }               \r\n}\r\nd3.selection.prototype.moveToBack = function() {  \r\n    return this.each(function() { \r\n        var firstChild = this.parentNode.firstChild; \r\n        if (firstChild) { \r\n            this.parentNode.insertBefore(this, firstChild); \r\n        } \r\n    });\r\n};\r\nwindow.onorientationchange = function() {\r\n    setTimeout(resizeend, 200);\r\n};\r\n\r\n\r\nvar parentFrame;\r\n\r\nfunction resizeParentFrame () {\r\n    var height = document.getElementById(\"global\").offsetHeight;\r\n    if (parentFrame) {\r\n      parentFrame.style.height = (height+20)+\"px\";\r\n      return;\r\n    }\r\n    var ifs = window.top.document.getElementsByTagName(\"iframe\");\r\n    for(var i = 0, len = ifs.length; i < len; i++)  {\r\n        var f = ifs[i];\r\n        if (window.location.href.includes($(f).attr(\"src\"))) {\r\n            parentFrame = f;\r\n            f.style.height = (height)+\"px\";\r\n        }\r\n\r\n    }\r\n  }\r\n\r\nfunction resize() {\r\n\r\n    if (indicators[currentCategory].chartType == \"scatter\") {\r\n        //return;\r\n    }\r\n    \r\n    if ($(document).innerWidth() < 600 && indicators[0].resizeParentFrame) {\r\n        resizeParentFrame();\r\n        if (window.self !== window.top) {\r\n            $(\"body, html\").css(\"overflow-y\", \"hidden\");\r\n        }\r\n        return;\r\n    }\r\n    \r\n    $(\"#chart\").html(\"\");\r\n    init();\r\n}\r\nfunction addNSILogo () {\r\n    if (_(\"imgYourLogo\").length > 0) {\r\n        var img = _(\"imgYourLogo\");\r\n        var height = $(\"#estatLogo\").height() *0.6;\r\n        $(\"#nsiConteiner\").html(img);\r\n        $(\"#nsiConteiner img\").css(\"height\", height);\r\n    }else {\r\n        $(\"#logo-desktop\").attr(\"href\", \"\");   \r\n    }\r\n}\r\n$(function() {\r\n    dom.watch();\r\n    $('#logo-desktop').click(function(e) {\r\n        e.preventDefault();\r\n        //do other stuff when a click happens\r\n    });\r\n    // config.searchPseudoElements = true;\r\n\r\n    if (indicators[currentCategory].displaySharing != \"always\" &&  simpleMode) {\r\n        $(\"#navbar, #icons-container\").hide();\r\n    }\r\n    if (indicators[currentCategory].displayCookieConsent && indicators[currentCategory].displayCookieConsent == true) {\r\n        $(\"#cookies-link\").show();\r\n    }else {\r\n        $(\".col.side\").hide();\r\n    }\r\n    setupLocalisation();\r\n    addNSILogo();\r\n    translateAll();\r\n    document.title = _(\"document.title\");\r\n    initDefaultValues();\r\n    var callback = function () {\r\n        $(\"#loader\").hide();\r\n        window.categorySelected = 0;\r\n        localiseInterface();\r\n\r\n        if (indicators[currentCategory].UISelectInd == \"Icons\") {\r\n            createIndSelectionBigIcons();\r\n        } else if (indicators[currentCategory].UISelectInd == \"Select\") {\r\n            createIndSelectionSelectbox();\r\n        } else {\r\n            createIndSelectionCheckBoxes();\r\n        }\r\n        createSocial()\r\n        processData(currentCategory, currentSorting, null);\r\n    };\r\n    if (indicators[currentCategory].dataType == \"file\") { \r\n        loadDataFromFile(function () {\r\n            callback();\r\n        });\r\n    } else {\r\n        jQuery.when(requestData(0)).done(function() {\r\n            callback();\r\n        }).fail(function(error) {\r\n            console.log('error while retrieving data', error);\r\n        });\r\n    }\r\n    buildCustomList();\r\n    if ($(document).innerWidth() < 600 && indicators[0].resizeParentFrame) {\r\n        setTimeout(resizeParentFrame,500);\r\n        return;\r\n    }\r\n});\r\n\r\nfunction loadDataFromFile (callback) {\r\n\r\n    $.ajax({\r\n        type: \"GET\",  \r\n        url: \"data/data.csv\",\r\n        dataType: \"text\",       \r\n        success: function(response)  \r\n        {\r\n            dataFile = $.csv.toObjects(response, {\"separator\" : \";\"});\r\n            callback();\r\n\r\n        }   \r\n      });\r\n}\r\n\r\nfunction filterDataFile (filterKey, filterValue) {\r\n    var dataTmp =  dataFile.filter(function(el) { return el[filterKey] == filterValue });\r\n    var allKeyValue = indicators[currentCategory].grouping.groups.map( function( value ) {return value.code});\r\n\r\n     dataFileFiltered = dataTmp.map( function( value ) {\r\n        delete(value.Total);\r\n\r\n        if (value[allKeyValue[0]] != \"z\" && value[allKeyValue[0]] != NaN) {\r\n            value.Total = 100;\r\n         }else if (indicators[currentCategory].chartType == \"scatter\") {\r\n            value.Total = 100;\r\n         }\r\n         for (var i = 0; i < allKeyValue.length; i++) {\r\n            var key = allKeyValue[i];\r\n            var valueTmp = value[key];\r\n\r\n            if (valueTmp && typeof valueTmp == \"string\" &&  valueTmp.indexOf(\",\") !== -1) {\r\n                valueTmp = valueTmp.replace(\",\",\".\");\r\n            }\r\n  \r\n            if (valueTmp == \"z\" && indicators[currentCategory].chartType == \"scatter\") {\r\n                valueTmp = 0;\r\n    \r\n            }else {\r\n          \r\n            }\r\n  \r\n            value[key] = valueTmp;\r\n         }\r\n        return value;\r\n    });\r\n    \r\n    return dataFileFiltered;\r\n\r\n}\r\n\r\nfunction changeParams(paramName, value) {\r\n    for (var indicatorIndex in indicators) {\r\n        var indicator = indicators[indicatorIndex];\r\n        var params = indicator.params;\r\n        for (var key in params) {\r\n            const param = params[key];\r\n            if (key == paramName) {\r\n                param.selected = value;\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nfunction initDefaultValues() {\r\n    groupsNames = [];\r\n    groupsColors = {};\r\n    groups = [];\r\n\r\n    var params = indicators[currentCategory].params;\r\n    for (var paramKey in params) {\r\n        var param = params[paramKey];\r\n        if (param.items) {\r\n            if (param.urlParam && getParameterValue(param.urlParam)) {\r\n                changeParams(paramKey, getParameterValue(param.urlParam));\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    const grouping = indicators[currentCategory].grouping;\r\n    currentSorting = grouping.default;\r\n\r\n    var iterator = 1;\r\n\r\n    // add all groups we need\r\n    for (var group in grouping.groups) {\r\n\r\n        var currData = \"data\" + iterator;\r\n\r\n        if (grouping.groups[group].code == currentSorting) {\r\n            selectedSortProperty = currData;\r\n        }\r\n        groupsMapping[grouping.groups[group].code] = currData;\r\n        groups.push(currData);\r\n\r\n        groupsNames[currData] = grouping.groups[group].legend ? _(grouping.groups[group].legend) : _(grouping.groups[group].title);\r\n        groupsColors[currData] = grouping.groups[group].color;\r\n        if (grouping.groups[group].type && grouping.groups[group].type != \"bar\" ) {\r\n\r\n        }\r\n        groupsTypes[currData] = grouping.groups[group].type ? grouping.groups[group].type : \"line\";     \r\n        iterator++;\r\n    }\r\n\r\n    displayed = groups;\r\n\r\n}\r\n\r\nfunction initSortingCheckboxes() {\r\n\r\n    $(\"#chartSort\").html('<p class=\"sortby\">\t\t\t\t\t\t\t' + _(\"sortBy.title\") + ' </p>');\r\n    var html = '';\r\n    const grouping = indicators[currentCategory].grouping;\r\n\r\n    for (var group in grouping.groups) {\r\n        var opacity = currentSorting == grouping.groups[group].code ? 'style=\"opacity:1\"' : 'style=\"opacity:0.3\"';\r\n        var icon = currentSorting == grouping.groups[group].code ? CHECKED_FA_HTML : UNCHECKED_FA_HTML;\r\n        html += '<div class=\"checkbox checkbox-success\" id=\"sort' + grouping.groups[group].code + '\">' + icon + '<label for=\"checkboxSmall\">' + _(grouping.groups[group].title) + '</label></div>';\r\n\r\n    }\r\n\r\n    html += \"\";\r\n    $(\"#chartSort\").append(html);\r\n    $(\"#chartSort ul li a\").click(function() {\r\n        var code = $(this).attr(\"href\").replace(\"#\", \"\");\r\n\r\n        currentSorting = code;\r\n\r\n        processData(window.categorySelected, currentSorting, null);\r\n    })\r\n\r\n    $(\"#chartSort div.checkbox\").click(function() {\r\n        var code = $(this).attr(\"id\").replace(\"sort\", \"\");\r\n\r\n        currentSorting = code;\r\n\r\n        processData(window.categorySelected, currentSorting, null);\r\n    })\r\n\r\n}\r\n\r\n\r\nfunction initSortingColorBoxes() {\r\n    $(\"#chartSort\").html('');\r\n    var html = '<ul>';\r\n    const grouping = indicators[currentCategory].grouping;\r\n    var iterator = 1;\r\n\r\n    for (var group in grouping.groups) {\r\n        var opacity = currentSorting == grouping.groups[group].code ? 'style=\"opacity:1\"' : 'style=\"opacity:0.3\"'\r\n        html += '<li ' + opacity + ' ><a href=\"#' + grouping.groups[group].code + '\"><div class=\"square\" style=\"background-color:' + grouping.groups[group].color + '\"></div>' + _(grouping.groups[group].title) + '</li></a>';\r\n    }\r\n\r\n    html += \"</ul>\";\r\n    $(\"#chartSort\").append(html);\r\n    $(\"#chartSort ul li a\").click(function() {\r\n        var code = $(this).attr(\"href\").replace(\"#\", \"\");\r\n        currentSorting = code;\r\n        processData(window.categorySelected, currentSorting, null);\r\n    })\r\n\r\n}\r\n\r\nfunction indicatorClick(category) {\r\n    $(\"#loader\").show();\r\n    currentCategory = category;\r\n    initDefaultValues();\r\n    var callback = function () {\r\n        $(\"#loader\").hide();\r\n        window.categorySelected = category\r\n        const data = storage.processedData[category]\r\n        // localise\r\n        localiseInterface(category);\r\n        processDataForCategory(category);\r\n\r\n    } \r\n    if (indicators[category].dataType == \"file\") { \r\n        callback();\r\n    } else {\r\n        jQuery.when(requestData(category)).done(function() {\r\n            callback();\r\n        }).fail(function(error) {\r\n            console.log('error while retrieving data', error);\r\n        });\r\n    }\r\n\r\n}\r\n\r\nfunction processDataForCategory(category, sort = currentSorting) {\r\n    processData(category, sort, null);\r\n}\r\n\r\nfunction correctData2 (data, sort) {\r\n\r\n    //return data;\r\n    const grouping = indicators[currentCategory].grouping;\r\n    let groups = grouping.groups.map(a => a.code);\r\n    //console.log(groups);\r\n    var groupsRemaining = groups.filter(function(el) { return el != sort }); \r\n    //console.log(\"groupsRemaining\");\r\n    //console.log(groupsRemaining);\r\n    var dataToCorrect = groupsRemaining[0];\r\n\r\n    data.forEach(function(item) {\r\n        //console.log(item);\r\n        if (item[sort +\"_UNTOUCHED\"]) {\r\n            item[sort] = item[sort +\"_UNTOUCHED\"];\r\n            delete item[sort +\"_UNTOUCHED\"];\r\n        }\r\n        if (item[dataToCorrect +\"_UNTOUCHED\"] == undefined){ \r\n            item[dataToCorrect +\"_UNTOUCHED\"] = item[dataToCorrect];\r\n\r\n        }\r\n        var allOtherVal = 0;// = item.filter(function(el) { console.log(el);return el != sort }); ;\r\n        jQuery.each(item, function(name, value) {\r\n            if (groups.indexOf(name) !== -1 && name !== dataToCorrect) {\r\n                allOtherVal+=parseFloat(value);\r\n            }\r\n        });\r\n        //console.log(item);\r\n        item[dataToCorrect] = 100 - allOtherVal;\r\n\r\n\r\n    })\r\n\r\n    return data;\r\n\r\n}\r\n\r\nexport default function processData(category, sort, countries2Ignore, direction = \"desc\") {\r\n    countries2Ignore = countries2Ignore == null ? [] : countries2Ignore;\r\n    const grouping = indicators[currentCategory].grouping;\r\n\r\n    data = [];\r\n    countries = [];\r\n    countriesCodes = [];\r\n    var array;\r\n\r\n    if (indicators[category].dataType == \"file\") {\r\n        var filterKey = indicators[category].dataFileFilter.filterKey;\r\n        var filterValue = indicators[category].dataFileFilter.filterValue;\r\n        array = filterDataFile(filterKey, filterValue);\r\n\r\n    } else {\r\n        var dataProcess = storage.processedData[category];\r\n\r\n         array = $.map(dataProcess, function(value, index) {\r\n            return [value];\r\n        });\r\n    }\r\n\r\n    var compareCustum = compare(sort);\r\n\r\n    var indexFrom = 0;\r\n    arrayGrouped = [];\r\n\r\n    arrayNoData = constants.countries;\r\n\r\n    constants.countriesGroupped.forEach(function(arrayCountries) {\r\n\r\n        var arrayCountriesWithoutRemove = arrayCountries;\r\n\r\n        if (arrayCountriesWithoutRemove.length > 0) {\r\n            var nbDataAvailable = nbOfDavaAvailableForCountries(array, arrayCountries);\r\n            var arrayDataTmp = array.slice(indexFrom, eval(indexFrom + nbDataAvailable));\r\n\r\n            if (typeof indicators[currentCategory].correctDataTo100 == undefined || typeof indicators[currentCategory].correctDataTo100 == \"undefined\" || typeof indicators[currentCategory].correctDataTo100 == true) {\r\n                arrayDataTmp = correctData2(arrayDataTmp, sort);\r\n            }\r\n            var arrayDataCleaned = [];\r\n            arrayDataTmp = arrayDataTmp.filter( function( el ) {\r\n                return (indicators[category].countries2Remove.indexOf( el.Geo ) < 0 && countries2Ignore.indexOf( el.Geo ) < 0);\r\n              } );\r\n            arrayDataTmp.forEach(item => {\r\n                //console.log(item);\r\n                if (item.Total != undefined) {\r\n                    //console.log(item);\r\n                    arrayDataCleaned.push(item);\r\n                    var indexCountry = arrayNoData.indexOf(item.Geo);\r\n                    if (indexCountry > -1) {\r\n                        arrayNoData.splice(indexCountry, 1);\r\n                    }\r\n                }\r\n            });\r\n            arrayDataCleaned = arrayDataCleaned.sort(compareCustum);\r\n//console.log(arrayDataCleaned);\r\n            if (direction == \"asc\") {\r\n                arrayDataCleaned = arrayDataCleaned.reverse();\r\n            }\r\n            if (nbDataAvailable > 0) {\r\n                arrayGrouped.push(...arrayDataCleaned);\r\n                arrayGrouped.push([]);\r\n                indexFrom += nbDataAvailable;\r\n            }\r\n        }\r\n    });\r\n\r\n    arrayGrouped.forEach(function(item) {\r\n        if (item != undefined && item.Geo != undefined && item.Total != undefined) {\r\n            var arrDataItem = [];\r\n            for (var groupIndex in grouping.groups) {\r\n                var code = grouping.groups[groupIndex].code;\r\n                arrDataItem.push(item[code]);\r\n            }\r\n            arrDataItem.push(item.Geo);\r\n            /*\r\n            console.log(\"****************\");\r\n            console.log(\"Push country \"+item.Geo);\r\n            console.log(item);\r\n            */\r\n            data.push(arrDataItem);\r\n            countries.push(_(item.Geo));\r\n            countriesCodes.push(item.Geo);\r\n\r\n        } else if (item.Geo == undefined && arrayGrouped[arrayGrouped.length-1] != item) {\r\n            data.push([null, null, null, \"\"]);\r\n            countries.push(item.Geo);\r\n            countriesCodes.push(item.Geo);\r\n\r\n        }\r\n\r\n    });\r\n    data = [groups].concat(data);\r\n    var dataCorrectedTmp = correctData(data);\r\n    dataNotCorrected = data.splice(0);\r\n    data = dataCorrectedTmp;\r\n\r\n    if (window.parent !== window && window.parent.disableCountries) {\r\n        window.parent.disableCountries(arrayNoData)\r\n    }\r\n\r\n    if ($(\"#chart svg\").length) {\r\n        chart.destroy();\r\n        init();\r\n    } else {\r\n        init();\r\n\r\n    }\r\n    return;\r\n}\r\n\r\n\r\n\r\n// Dirty fix to have all sum to 100 as some data in the dataset has 99.9 or 100.1 sum\r\nfunction correctData(data, indexToNotChange = null) {\r\n    //indexToNotChange = indexDataToNotTouch;\r\n    //console.log(\"indexDataToNotTouch  = \"+indexDataToNotTouch);\r\n    var dataTmp = [];\r\n    var iterator = 0;\r\n    arrayNotCorrected = [];\r\n    data.forEach(function(item) {\r\n        var itempTmp = item.slice(0);\r\n        var code = item[item.length - 1];\r\n        var itempTmpSum = item.slice(0, item.length - 1);\r\n        var sum = itempTmpSum.reduce(function(pv, cv) {\r\n            return pv + cv;\r\n        }, 0);\r\n\r\n        dataTmp.push(itempTmp);\r\n        iterator++;\r\n    });\r\n    return dataTmp;\r\n}\r\n\r\n\r\n\r\nfunction getDimensions() {\r\n    const padding = 45\r\n    var h = window.innerHeight // * 0.5 - padding,\r\n\r\n    if ((window.orientation == 90 || window.orientation == -90) /*&& window.innerHeight < 600*/ ) {\r\n        h = Math.max(h, 800);\r\n    }\r\n    // w = window.innerWidth * 0.95, //mobile!\r\n    const w = window.innerWidth // * 0.9;\r\n    const dim = {}\r\n    dim.axisRotated = false\r\n    dim.padding = 50\r\n    dim.barwidth = window.innerHeigh > 700 ? 25 : 10;\r\n    if (window.isMobile) {\r\n        // Find matches\r\n        const mql = window.matchMedia('(orientation: portrait)')\r\n\r\n        // If there are matches, we're in portrait\r\n        if (mql.matches) {\r\n            // Portrait orientation\r\n            if (w > 321 && w <= 480) {\r\n                dim.axisRotated = true\r\n                // h = 800;\r\n                dim.h = h * 0.6 + 30\r\n                dim.w = w * 0.95\r\n            } else if (w <= 320) {\r\n                dim.axisRotated = true\r\n                dim.h = h * 0.57\r\n            } else {\r\n                // Landscape orientation\r\n                // check also for ultrawide screens\r\n                if (h <= 768 && w > 1200) {\r\n                    dim.h = h * 0.45\r\n                } else {\r\n                    dim.h = h * 0.53\r\n                    // dim.h = h * 0.5;\r\n\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        if (h < 550 ) {\r\n            dim.h = h * 0.84 - UIComponentHeight - padding;\r\n        } else  if (h < 700 ) {\r\n            dim.h = h * 0.80 - UIComponentHeight - padding;\r\n        } else if (h < 1000) {\r\n            // const padding = 30,\r\n            // h = window.innerHeight * 0.8 - padding,\r\n            dim.h = h * 0.843 - UIComponentHeight - padding;\r\n            dim.h += h < 768 ? 30 : 0;\r\n        } else {\r\n            // const padding = 30,\r\n            // h = window.innerHeight * 0.8 - padding,\r\n            dim.h = h * 0.843 - UIComponentHeight - padding;\r\n        }\r\n\r\n        // w = window.innerWidth * 0.95, //mobile!\r\n        dim.w = w * 0.95;\r\n\r\n        if (window.indicators[currentCategory].publicationId === \"HousingInEurope\") {\r\n            dim.w = w * 0.95;\r\n        }\r\n        if (isIE() && simpleMode) {\r\n            dim.h = dim.h * 0.9;\r\n        }\r\n    }\r\n\r\n    //$(\"#header, #titles, #chartInd, #chartFooter\").hide();\r\n    dim.h = calculateRemainingHeight();\r\n    setTimeout(function() {\r\n        calculateRemainingHeight();\r\n    },2000)\r\n    return dim\r\n}\r\n\r\nfunction calculateRemainingHeight () {\r\n    //console.log(\"**************************\");\r\n    var h = $(window).height();\r\n    var height = h;\r\n    //console.log(\"Height Initial  = \"+h);\r\n    \r\n    h -= document.getElementById(\"header\").offsetHeight;\r\n    //console.log(\"Height Header = \"+document.getElementById(\"header\").offsetHeight);\r\n    //console.log(\"Height  = \"+h);\r\n\r\n\r\n    if (simpleMode) {\r\n        var topMargin;\r\n        if (height < 400) {\r\n            topMargin = 10;\r\n        }else if (height < 600){\r\n            topMargin = 15;\r\n        }else {\r\n            topMargin = 20;\r\n        }\r\n        $(\"#titles\").css(\"margin-top\",topMargin+\"px\")\r\n        h -= topMargin;\r\n    }\r\n    h -= $(\"#titles\").height();\r\n    //console.log(\"Height Titles = \"+$(\"#titles\").height());\r\n    //console.log(\"Height  = \"+h);\r\n\r\n    if (simpleMode && height < 600) {\r\n        var marginBottom = -28\r\n        $(\"#chart\").css(\"margin-bottom\",marginBottom+\"px\")\r\n        h -= marginBottom;\r\n\r\n        var marginTop = -7\r\n        $(\"#chart\").css(\"margin-top\",marginTop+\"px\")\r\n        h -= marginTop;\r\n    }else {\r\n        var marginBottom = -12\r\n        $(\"#chart\").css(\"margin-bottom\",marginBottom+\"px\")\r\n        h -= marginBottom;\r\n    }\r\n\r\n    h -= $(\"#chartSort\").height();\r\n    //console.log(\"Height Chart Sort = \"+$(\"#chartSort\").height());\r\n    //console.log(\"Height  = \"+h);\r\n\r\n    h -= $(\"#chartInd\").height();\r\n    //console.log(\"Height Chart Ind = \"+$(\"#chartInd\").height());\r\n    //console.log(\"Height  = \"+h);\r\n    h -= $(\"#legend\").height();\r\n    //console.log(\"Height Legend = \"+$(\"#legend\").height());\r\n    //console.log(\"Height  = \"+h);  \r\n\r\n    if (indicators[currentCategory].UISortGroup == \"checkboxSort\"\r\n    || indicators[currentCategory].UISortGroup == \"checkbox\") {\r\n    var fixedLegendHeight = 40;\r\n    h -= fixedLegendHeight;\r\n    //console.log(\"Height Legend = \"+fixedLegendHeight);\r\n    //console.log(\"Height  = \"+h);\r\n    }\r\n\r\n    h -= $(\"#chartFooter\").height(); \r\n    //console.log(\"Height Footer = \"+$(\"#chartFooter\").height()); \r\n    //console.log(\"Height  = \"+h); \r\n\r\n\r\n\r\n    //$(\"#header, #titles, #chartInd, #chartFooter\").css(\"background-color\",\"red\");\r\n    //$(\"#chart\").css(\"background-color\",\"blue\");\r\n    $(\"#chartSort\").css(\"margin\",\"unset\");\r\n    \r\n   // $(\"#dummy\").hide();\r\n\r\n    return h;\r\n}\r\n\r\n\r\nfunction init() {\r\n    hide = groups;\r\n    hide = hide.filter(displayedCat => {\r\n        return !displayed.includes(displayedCat)\r\n\r\n    })\r\n    $(\"#logo\").show();\r\n    UIComponentHeight = 43;\r\n    if (simpleMode) {\r\n        UIComponentHeight -= 60;\r\n    }\r\n    $(\"html\").addClass(indicators[currentCategory].publicationId);\r\n    if (indicators[currentCategory].usePatterns == true) {\r\n        dataColors = function(color, d) {\r\n            if (d.index != undefined) {\r\n                var dataRow = data[d.index + 1];\r\n                var code = dataRow[dataRow.length - 1];\r\n                if (code == selectedCountry) {\r\n                    var groupIndex = groups.indexOf(d.id);\r\n                    return \"url(#pattern\" + groupIndex + \")\";\r\n                } else {\r\n                    return groupsColors[d.id];\r\n                }\r\n            } else if (groupsColors[d]) {\r\n                return groupsColors[d];\r\n            }\r\n        };\r\n        color = {\r\n            pattern: [\"#1f77b4\", \"#aec7e8\"],\r\n            // Set colors' patterns;\r\n            // it should return an array of SVGPatternElement\r\n            tiles: function() {\r\n                var patterns = [];\r\n\r\n                for (var groupIndex in groups) {\r\n                    var group = groups[groupIndex];\r\n\r\n                    var pattern = document.createElementNS(\"http://www.w3.org/2000/svg\", \"pattern\");\r\n                    var rect = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\r\n\r\n                    pattern.setAttribute(\"patternUnits\", \"userSpaceOnUse\");\r\n                    pattern.setAttribute(\"patternTransform\", \"rotate(30)\");\r\n                    pattern.setAttribute(\"id\", \"pattern\" + group);\r\n                    pattern.setAttribute(\"id2\", \"pattern\" + groupIndex);\r\n                    pattern.setAttribute(\"x\", \"0\");\r\n                    pattern.setAttribute(\"y\", \"0\");\r\n                    pattern.setAttribute(\"width\", \"8\");\r\n                    pattern.setAttribute(\"height\", \"8\");\r\n                    pattern.setAttribute(\"fill\", \"none\");\r\n\r\n                    rect.setAttribute(\"x\", \"0\");\r\n                    rect.setAttribute(\"y\", \"0\");\r\n                    rect.setAttribute(\"width\", \"6\");\r\n                    rect.setAttribute(\"height\", \"8\");\r\n                    rect.setAttribute(\"style\", \"stroke:none;fill:\" + groupsColors[group]);\r\n\r\n                    pattern.appendChild(rect);\r\n\r\n                    patterns.push(pattern);\r\n                }\r\n                return patterns;\r\n\r\n            },\r\n\r\n            // for threshold usage, pattern values should be set for each steps\r\n            pattern: [\"none\", \"none\", \"none\", \"none\", \"none\"],\r\n\r\n            // will pass data object to the callback\r\n            onover: function(d) {\r\n                return \"pattern1\";\r\n                var dataRow = data[d.index + 1];\r\n\r\n                var code = dataRow[dataRow.length - 1];\r\n                if (code == selectedCountry) {\r\n                    return;\r\n                } else {\r\n                    //return \"blue\";\r\n\r\n                    return \"pattern1\";\r\n                    return d.id === \"data1\" ? \"#f26522\" : \"#f26522\";\r\n                }\r\n            }\r\n        };\r\n    } else {\r\n        dataColors = groupsColors;\r\n        color = groupsColors;\r\n        dataColors = function(color, d) {\r\n            if (d.id) {\r\n                return groupsColors[d.id];\r\n            } else {\r\n                return groupsColors[d];\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    if (indicators[currentCategory].UISortGroup == \"checkbox\") {\r\n        initSortingCheckboxes();\r\n\r\n        legendItems = {\r\n            onclick: function(id) {},\r\n            onover: function(id) {},\r\n            onout: function(id) {}\r\n        };\r\n        legendHide = false;\r\n        legendContent = {\r\n            bindto: '#legend',\r\n            template: function(title, color, data) {\r\n                if (title == \"undefined\") {\r\n                    return \"\";\r\n                }\r\n\r\n                return (\r\n\r\n                    \"<div class='noAction legend-wrapper' style='display:inline-block; margin-right: 16px;'><div id='checkbox-\" +\r\n\r\n                    title +\r\n\r\n                    \"' style='display:inline-block; color: black; margin-right: 8px'></div><div class='square' style='background-color:\" +\r\n\r\n                    color +\r\n\r\n                    \";padding:4px; display:inline-block;'></div><span style='margin-left: 3px; color: black;font-size:10px;'>\" +\r\n\r\n                    groupsNames[title] +\r\n\r\n                    \"</span><span class='sort' style='display:inline-block; margin-left: 6px;' title='\" +\r\n\r\n                    _('sort.hover') +\r\n\r\n                    \"' id='sort_\" +\r\n\r\n                    title +\r\n\r\n                    \"'></span></div>\"\r\n\r\n                )\r\n\r\n            }\r\n\r\n        };\r\n\r\n    } else if (indicators[currentCategory].UISortGroup == \"checkboxSort\") {\r\n        legendItems = {\r\n            onclick: function(id) {\r\n                // we only hide, if at least one series will stay active\r\n                if (displayed.includes(id) && displayed.length > 1) {\r\n                    displayed = displayed.filter(function(curId) {\r\n                        return curId !== id\r\n                    })\r\n                    chart.hide(id)\r\n                } else if (!displayed.includes(id)) {\r\n                    displayed.push(id)\r\n                    chart.show(id)\r\n                }\r\n    \r\n                if (displayed.length == 1) {\r\n                    var dataDisplayed = displayed[0];\r\n                    var idDisplayed = parseInt(dataDisplayed.replace(\"data\",\"\")) - 1;\r\n                    var iterator = 0;\r\n                    //console.log(\"not touched = \"+dataDisplayed+\"  index = \"+idDisplayed);\r\n                    indexDataToNotTouch = idDisplayed;\r\n\r\n                }else {\r\n                    indexDataToNotTouch = null;\r\n\r\n                }\r\n                processData(window.categorySelected, currentSorting, null, selectedSortDirection);\r\n                checkSortIcons(selectedSortProperty, selectedSortDirection);\r\n\r\n                //drawScatterLines();\r\n                \r\n            }\r\n\r\n        };\r\n        legendContent = {\r\n            bindto: '#legend',\r\n            template: function(title, color, data) {\r\n                if (title == \"undefined\") {\r\n                    return \"\";\r\n                }\r\n\r\n                let checkboxIcon = 'fa-check-square'\r\n\r\n                if (!displayed.includes(title)) {\r\n\r\n                    checkboxIcon = 'fa-square'\r\n\r\n                }\r\n                var groups = indicators[currentCategory].grouping.groups;\r\n                var item =  groups.find(function(el) { return el.color == color }); \r\n                let curSortIcon = 'fa-sort'\r\n\r\n                if (title === selectedSortProperty || item.code == currentSorting) {\r\n                    curSortIcon = selectedSortDirection === 'desc' ? 'fa-sort-down' : 'fa-sort-up'\r\n                }\r\n                curSortIcon = \"fa-sort-down\";\r\n                var legendShape = item.patternInLegend != \"false\" && item.pattern && item.type == \"line\" ? '<svg class=\"shape\"  style=\"stroke:'+item.color+'\" fill=\"'+item.color+'\">' + item.pattern + '</svg>' : '<span style=\"width: 15px;height: 15px;display: inline-block;background-color:' + item.color + '\"></span>';\r\n                //var legendShape = item.pattern  ? '<svg class=\"shape\" style=\"stroke:'+item.color+'\" fill=\"'+item.color+'\">' + item.pattern + '</svg>' : \"<div style='background-color:\" + color + \";padding:8px; display:inline-block;'></div>\";\r\n\r\n                return (\r\n\r\n                    \"<div class='legend-wrapper' style='display:inline-block; margin-right: 16px;'><div id='checkbox-\" +\r\n\r\n                    title +\r\n\r\n                    \"' style='display:inline-block; color: black; margin-right: 8px'><i class='far \" +\r\n\r\n                    checkboxIcon +\r\n\r\n                    \" fa-2x' ></i></div>\" + legendShape + \"<span style='margin-left: 3px; color: black;font-size:14px;'>\" +\r\n\r\n                    groupsNames[title] +\r\n\r\n                    \"</span><span class='sort' style='display:inline-block; margin-left: 6px;' title='\" +\r\n\r\n                    _('sort.hover') +\r\n\r\n                    \"' id='sort_\" +\r\n\r\n                    title +\r\n\r\n                    \"'><i class='fas \" +\r\n\r\n                    curSortIcon +\r\n\r\n                    \" fa-2x'  data-fa-transform='shrink-1 down-1' style='color:black'></i></span></div>\"\r\n\r\n                )\r\n\r\n            }\r\n\r\n        };\r\n        legendHide = \"undefined\";\r\n    } else if (indicators[currentCategory].UISortGroup == \"box\") {\r\n        initSortingColorBoxes();\r\n    }\r\n\r\n    if (indicators[currentCategory].UISelectInd && indicators[currentCategory].UISelectInd == \"Icons\") {\r\n        UIComponentHeight += (69 + 10);\r\n    } else if (indicators[currentCategory].UISelectInd && indicators[currentCategory].UISelectInd == \"Select\") {\r\n        UIComponentHeight += (46 + 10);\r\n    } else if (indicators[currentCategory].UISelectInd) {\r\n        UIComponentHeight += 30;\r\n    }\r\n\r\n    // Script\r\n    if (indicators[currentCategory].chartType == \"scatter\") {\r\n        initScatterChart();\r\n    } else {\r\n        initChart();\r\n    }\r\n   // \r\n\r\n\r\n}\r\n\r\nfunction findMinimum (data) {\r\n    var min  = 100;\r\n    for (var i = 0; i < data.length; i++) {\r\n        var item = data[i];\r\n        for (var j = 0; j < item.length -1; j++) {\r\n            min = (item[j] < min && item[j] != 0) ? item[j] : min;\r\n        }\r\n    }\r\n    return min;\r\n}\r\n\r\nfunction initScatterChart() {\r\n    var min = indicators[currentCategory].yAxis ? indicators[currentCategory].yAxis.min :  findMinimum(data);\r\n    var max =  indicators[currentCategory].yAxis ? indicators[currentCategory].yAxis.max : null;\r\n    var padding = indicators[currentCategory].yAxis ? 2 : null;\r\n\r\n    const dim = getDimensions()\r\n    var patterns = indicators[currentCategory].grouping.groups.map(a => a.pattern)\r\n    patterns = indicators[currentCategory].grouping.groups.filter(function(el) { return el.type != \"bar\" }).map(a => a.pattern);\r\n\r\n    $(\"body\").addClass(\"scatter\");\r\n        chart = bb.generate({\r\n            size: {\r\n                height: isMobile() ? dim.h : dim.h,\r\n                width: dim.w\r\n            },\r\n            padding:{\r\n                left:isMobile() ? 32 : null\r\n            },\r\n            categories:groupsNames,\r\n            data: {\r\n                hide:hide,\r\n                names:Object.assign({}, groupsNames),\r\n                rows: data,\r\n                //type: \"line\", // for ESM specify as: scatter()\r\n                types: groupsTypes,\r\n                color: dataColors\r\n            },\r\n    \r\n            axis: {\r\n                x: {\r\n                    type: \"category\",\r\n                    categories: countries,\r\n                    tick: {\r\n                        centered:true,\r\n                        rotate: 0,\r\n                        autorotate: true,\r\n                        multiline: false,\r\n                        culling: false,\r\n                        fit: true,\r\n                        \"format\": function(x) {\r\n                            // x is the datetime data\r\n                            var code = countriesCodes[x];\r\n                            return code == \"EU27_2020\" ? \"EU\" : code;\r\n                        }\r\n                      },\r\n    \r\n                },\r\n                y: {\r\n                    label: {\r\n                        text: _(\"indicator\"+indicators[currentCategory].code+\".yAxisTitle\"),\r\n                        position: \"outer-middle\"\r\n                    },\r\n                    min:min,\r\n                    max:max,\r\n                    padding:padding\r\n                 \r\n                }\r\n            },\r\n            bindto: \"#chart\",\r\n            point: {\r\n                pattern:patterns\r\n              },\r\n              onrendered: function() {\r\n                if (indicators[currentCategory].showVertLines != false) {\r\n                drawScatterLines();\r\n                }\r\n\r\n                $(\"#bookmark-link, #chartInd\").show();\r\n                checkSortIcons(selectedSortProperty, selectedSortDirection);\r\n    \r\n                d3.selectAll(\"pattern\").attr(\"id\", function(d) {\r\n                    return $(this).attr(\"id2\");\r\n                })\r\n                var code = selectedCountry;\r\n                var countryFound = false;\r\n                d3.selectAll('g.bb-axis.bb-axis-x .tick') //here's how you get all the nodes\r\n                    .each(function(d) {\r\n                        // your update code here as it was in your example\r\n                        if (d3.select(this).selectAll(\"tspan\").text() == code) {\r\n                            d3.select(this).selectAll(\"text\").attr(\"fill\", \"#E34A21\");\r\n                            d3.select(this).selectAll(\"text\").attr(\"font-weight\", \"bold\");\r\n                            countryFound = true;\r\n                        } else {\r\n                            d3.select(this).selectAll(\"text\").attr(\"fill\", \"black\")\r\n                            d3.select(this).selectAll(\"text\").attr(\"font-weight\", \"regular\")\r\n                        }\r\n    \r\n                    });\r\n                if (countryFound == false && parent.displayChartAlert) {\r\n                    parent.displayChartAlert(\"noData\", code);\r\n                } else {\r\n                    //alert('Data not available');\r\n                }\r\n                \r\n    \r\n              },\r\n              legend: {\r\n                hide: \"undefined\",\r\n              },\r\n              tooltip: {\r\n                order: \"desc\",\r\n                format: {\r\n                    value: function(value) {\r\n                        return Math.round(value * 100) / 100 + _(indicators[currentCategory].grouping.unit);\r\n                    },\r\n                },\r\n                contents: function(d, defaultTitleFormat, defaultValueFormat, color) {\r\n\r\n                    if (d[0].value == null && d[1].value == null) {\r\n                        return;\r\n                    }\r\n    \r\n                    var content = '<table class=\"bb-tooltip\"><tbody>' +\r\n                        '<tr><th style=\"background-color:black\" colspan=\"2\">' + countries[d[0].index] + '</th></tr>';\r\n                    const grouping = indicators[currentCategory].grouping;\r\n                    var originalData = arrayGrouped[d[0].index];\r\n                    var codes = indicators[currentCategory].grouping.tooltipOrder ? indicators[currentCategory].grouping.tooltipOrder : indicators[currentCategory].grouping.groups.map(function( n, i ) {return n.code;});;\r\n\r\n                    for (var indexCode in codes) {\r\n\r\n                        var code = codes[indexCode];\r\n                        var index = parseInt(indexCode)+1;\r\n                        var dataCode = groupsMapping[code];\r\n                        var item = d.find(function(el) { return el.id == dataCode }); \r\n                       // if (item == null) {console.log(\"item == null\");return;}\r\n                        if (item != null && item.id != \"undefined\") {\r\n                            var groupIndex = groups.indexOf(item.id);\r\n                            var currentGroup = grouping.groups[groupIndex].code;\r\n    \r\n                            var code = item.code;\r\n                            var value = roundValue(item.value, indicators[currentCategory].precision);\r\n                            \r\n                            if (currentGroup != currentSorting && originalData[currentGroup+\"_UNTOUCHED\"]) {\r\n                                value = \"Corrected\";\r\n                                value = roundValue(originalData[currentGroup+\"_UNTOUCHED\"],indicators[currentCategory].precision);\r\n                            }\r\n                            var legend = grouping.groups[groupIndex].legend ? grouping.groups[groupIndex].legend : grouping.groups[groupIndex].title;\r\n    \r\n                            if (value != 0) {\r\n                                var strValue = value.toString();\r\n                                strValue = strValue.replace(\".\", _(\"decimal_separator\"));\r\n                                var legendShape = grouping.groups[groupIndex].patternInLegend != \"false\" &&  grouping.groups[groupIndex].pattern && grouping.groups[groupIndex].type == \"line\" ? '<svg class=\"shape\"  style=\"stroke:'+grouping.groups[groupIndex].color+'\" fill=\"'+grouping.groups[groupIndex].color+'\">' + grouping.groups[groupIndex].pattern + '</svg>' : '<span style=\"background-color:' + grouping.groups[groupIndex].color + '\"></span>';\r\n                                content += '<tr class=\"bb-tooltip-name-data1\"><td class=\"name\">' + legendShape + _(legend) + '</td><td class=\"value\">' + strValue + ' ' + _(indicators[currentCategory].grouping.unit) + '</td></tr>';\r\n    \r\n                            }\r\n    \r\n    \r\n                        }\r\n                    }\r\n                    content += '</tbody></table>';\r\n                    return content;\r\n    \r\n                }\r\n            },\r\n            grid: {\r\n                y: {\r\n                  show: true,\r\n                },\r\n          },\r\n          legend: {\r\n            hide: legendHide,\r\n            item: legendItems,\r\n            contents: legendContent,\r\n        },\r\n          });\r\n    \r\n    }\r\n    \r\n\r\nfunction initChart() {\r\n   // console.log(data);\r\n    const dim = getDimensions()\r\n    var barWidthRatio = dim.h < 500 ? 1.4 : 1.6;\r\n    //console.log(data);\r\n    chart = bb.generate({\r\n        size: {\r\n            height: dim.h,\r\n            width: dim.w\r\n        },\r\n        padding:{\r\n            right:11\r\n        },\r\n        data: {\r\n            //columns:dataColumns,\r\n            hide: hide,\r\n            rows: data,\r\n            names: groupsNames,\r\n            labels: {\r\n                format: function(v, id, i, j) {\r\n                    return id == \"data1\" ? Math.round(v * 100) / 100 + '%' : \"\";\r\n                },\r\n                position: {\r\n                    x: -50,\r\n                    y: 1\r\n                }\r\n            },\r\n            type: \"bar\",\r\n            groups: [\r\n                groups\r\n            ],\r\n            order: null,\r\n            color: dataColors\r\n        },\r\n        grid: {\r\n            y: {\r\n                lines: [{\r\n                    value: 0\r\n                }]\r\n            }\r\n        },\r\n        bar: {\r\n            width: {\r\n                ratio: barWidthRatio,\r\n                max: 50\r\n            },\r\n            padding: -20\r\n\r\n        },\r\n        axis: {\r\n            rotated: true,\r\n            x: {\r\n                type: \"category\",\r\n                categories: countries,\r\n                padding:{right:0.2},\r\n                tick: {\r\n                    height: 160,\r\n                    width: 180,\r\n                    multiline: false\r\n                },\r\n      \r\n\r\n            },\r\n            y: {\r\n                max: 91\r\n            }\r\n        },\r\n        tooltip: {\r\n            order: \"desc\",\r\n            format: {\r\n                value: function(value) {\r\n                    return Math.round(value * 100) / 100 + '%';\r\n                },\r\n            },\r\n            contents: function(d, defaultTitleFormat, defaultValueFormat, color) {\r\n                if (d[0].value == 0) {\r\n                    return;\r\n                }\r\n                //EU27_2020_toolitp\r\n                var countryName = countries[d[0].index];\r\n                if (_(countriesCodes[d[0].index]+\"_tooltip\") != countriesCodes[d[0].index]+\"_tooltip\") {\r\n                    countryName = _(countriesCodes[d[0].index]+\"_tooltip\");\r\n                }\r\n                var content = '<table class=\"bb-tooltip\"><tbody>' +\r\n                    '<tr><th style=\"background-color:black\" colspan=\"2\">' + countryName + '</th></tr>';\r\n                const grouping = indicators[currentCategory].grouping;\r\n                var originalData = arrayGrouped[d[0].index];\r\n                for (var groupIndexTmp in d) {\r\n                    var item = d[groupIndexTmp];\r\n                    if (item.id != \"undefined\") {\r\n                        var groupIndex = groups.indexOf(item.id);\r\n                        var currentGroup = grouping.groups[groupIndex].code;\r\n                        //console.log(currentSorting);\r\n                        //console.log(currentGroup);\r\n                        var code = item.code;\r\n                        var value = roundValue(item.value);\r\n                        \r\n                       // console.log(code);\r\n                       // var itemTmp = data.filter(function(el) {console.log(el); return el.Geo = code }); \r\n                       // console.log(itemTmp)\r\n                        /*\r\n                        if (arrayNotCorrected[countriesCodes[d[0].index] + \"_\" + groupIndex]) {\r\n                            value = roundValue(arrayNotCorrected[countriesCodes[d[0].index] + \"_\" + groupIndex]);\r\n                        }\r\n                        */\r\n                       //console.log(originalData);\r\n                        if (currentGroup != currentSorting && originalData[currentGroup+\"_UNTOUCHED\"]) {\r\n                            value = \"Corrected\";\r\n                            value = roundValue(originalData[currentGroup+\"_UNTOUCHED\"]);\r\n                        }\r\n                        var legend = grouping.groups[groupIndex].legend ? grouping.groups[groupIndex].legend : grouping.groups[groupIndex].title;\r\n\r\n                        if (value != 0) {\r\n                            var strValue = value.toString();\r\n                            strValue = strValue.replace(\".\", _(\"decimal_separator\"));\r\n                            content += '<tr class=\"bb-tooltip-name-data1\"><td class=\"name\"><span style=\"background-color:' + grouping.groups[groupIndex].color + '\"></span>' + _(legend) + '</td><td class=\"value\">' + strValue + ' %</td></tr>';\r\n\r\n                        }\r\n\r\n\r\n                    }\r\n                }\r\n                content += '</tbody></table>';\r\n                return content;\r\n\r\n            }\r\n        },\r\n        legend: {\r\n            hide: legendHide,\r\n            item: legendItems,\r\n            contents: legendContent,\r\n        },\r\n        interaction: {\r\n            inputType: {\r\n                touch: {\r\n                    preventDefault: true\r\n                }\r\n            }\r\n        },\r\n        color: color,\r\n        bindto: \"#chart\",\r\n        onrendered: function() {\r\n\r\n            d3.selectAll('g.bb-axis-x .tick') //here's how you get all the nodes\r\n                .each(function(d) {\r\n                    // your update code here as it was in your example\r\n                    //console.log(d3.select(this).selectAll(\"tspan\").text())\r\n                    if (d3.select(this).selectAll(\"tspan\").text() == \"\") {\r\n                        $(this).remove();\r\n                        d3.select(\".bb-event-rect-\" + d).remove();\r\n                        d3.selectAll(\".bb-bar-0\").style(\"height\", \"50px\")\r\n\r\n                    } else { // -6\r\n                        d3.select(this).selectAll(\"text\").attr(\"y\", \"10px\")\r\n                        d3.select(this).selectAll(\"line\").remove();\r\n                    }\r\n\r\n                });\r\n            d3.selectAll('rect.bb-event-rect') //here's how you get all the nodes\r\n                .each(function(d) {\r\n                    d3.select(this).attr(\"height\", \"8\")\r\n                });\r\n\r\n            $(\"#bookmark-link, #chartInd\").show();\r\n            checkSortIcons(selectedSortProperty, selectedSortDirection);\r\n\r\n            d3.selectAll(\"pattern\").attr(\"id\", function(d) {\r\n                return $(this).attr(\"id2\");\r\n            })\r\n            var code = selectedCountry;\r\n            var countryFound = false;\r\n            d3.selectAll('g.bb-axis.bb-axis-x .tick') //here's how you get all the nodes\r\n                .each(function(d) {\r\n                    // your update code here as it was in your example\r\n                    if (d3.select(this).selectAll(\"tspan\").text() == _(code)) {\r\n                        d3.select(this).selectAll(\"text\").attr(\"fill\", \"#E34A21\");\r\n                        d3.select(this).selectAll(\"text\").attr(\"font-weight\", \"bold\");\r\n                        countryFound = true;\r\n                    } else {\r\n                        d3.select(this).selectAll(\"text\").attr(\"fill\", \"black\")\r\n                        d3.select(this).selectAll(\"text\").attr(\"font-weight\", \"regular\")\r\n                    }\r\n\r\n                });\r\n            if (countryFound == false && parent.displayChartAlert) {\r\n                parent.displayChartAlert(\"noData\", code);\r\n            } else {\r\n                //alert('Data not available');\r\n            }\r\n        },\r\n    });\r\n}\r\n\r\nwindow.updateCountry = function(countryCode) {\r\n    if (countryCode != \"\") {\r\n        selectedCountry = countryCode;\r\n        highlightCountry(chart, countryCode);\r\n    }\r\n}\r\n\r\nfunction drawScatterLines() { \r\n  \r\n    $(\".dotLine\").remove();\r\n\r\n    var svg\r\n    var lineFunction = d3.line()\r\n      .x(function(d) { return d.x; })\r\n      .y(function(d) { return d.y; })\r\n\r\n    for (var i = 0; i < data.length; i++) {\r\n\r\n        var iterator = 0;\r\n        var xSaved = 0;\r\n        var circleCoords = [];\r\n        var line = d3.line()\r\n        var nodes = d3.selectAll(\".bb-circle-\"+i)\r\n        .each(function(d) {\r\n\r\n            var item = d3.select(this);\r\n            var visible = displayed.indexOf(d.id) !== -1;\r\n\r\n            if (d.value != null && d.value != 0 && visible) {\r\n                var xPadding = window.innerWidth < 600 ? 3 : 7;\r\n                var yPadding = window.innerWidth < 600 ? 3 : 7;\r\n                var cx = $(this).attr('cx') ? $(this).attr('cx') : parseFloat($(this).attr('x'))+xPadding;\r\n\r\n                var cy = $(this).attr('cy') ? $(this).attr('cy') : parseFloat($(this).attr('y'))+yPadding;\r\n                circleCoords.push({x:cx, y:cy});\r\n            }\r\n            if (indicators[currentCategory].removeZeroValue && d.value == 0) {\r\n                this.remove();\r\n            }\r\n            if (d.id == \"undefined\" ) {\r\n                this.remove();\r\n            }\r\n            iterator++;\r\n        });\r\n\r\n        svg = d3.selectAll(\"#chart svg .bb-chart-lines\")\r\n\r\n        var lineGraph = svg.append(\"path\")\r\n        .attr(\"d\", lineFunction(circleCoords))\r\n        .attr(\"class\", \"dotLine\")\r\n        .moveToBack();\r\n\r\n    }\r\n                \r\n}\r\n\r\nfunction highlightCountry(chart, code) {\r\n    selectedCountry = code;\r\n    var countryFound = false;\r\n    var index = 0;\r\n\r\n    d3.selectAll('g.bb-axis.bb-axis-x .tick') //here's how you get all the nodes\r\n        .each(function(d) {\r\n            // your update code here as it was in your example\r\n            if (d3.select(this).selectAll(\"tspan\").text() == _(code)) {\r\n                d3.select(this).selectAll(\"text\").attr(\"fill\", \"#E34A21\");\r\n                d3.select(this).selectAll(\"text\").attr(\"font-weight\", \"bold\");\r\n\r\n                countryFound = true;\r\n            } else {\r\n                d3.select(this).selectAll(\"text\").attr(\"fill\", \"black\")\r\n                d3.select(this).selectAll(\"text\").attr(\"font-weight\", \"regular\")\r\n            }\r\n            index++;\r\n        });\r\n\r\n    if (countryFound == false && parent) {\r\n        parent.displayChartAlert(\"noData\", code);\r\n    } else {\r\n        //alert('Data not available');\r\n    }\r\n\r\n    chart.load({\r\n        rows: data\r\n    });\r\n\r\n\r\n}\r\n\r\nfunction setcurrentSortingCS(newValue) {\r\n    currentSorting = newValue;\r\n}\r\n\r\nfunction selectedSortPropertyCS(newValue) {\r\n    selectedSortProperty = newValue;\r\n}\r\n\r\nfunction selectedSortDirectionCS(newValue) {\r\n    selectedSortDirection = newValue;\r\n}\r\nexport {\r\n    processData,\r\n    processDataForCategory,\r\n    highlightCountry,\r\n    indicatorClick,\r\n    setcurrentSortingCS,\r\n    changeParams,\r\n    selectedSortPropertyCS,\r\n    selectedSortDirectionCS,\r\n\r\n    currentCategory,\r\n    CHECKED_FA_HTML,\r\n    UNCHECKED_FA_HTML,\r\n    selectedSortProperty,\r\n    selectedSortDirection,\r\n    currentSorting,\r\n    groups\r\n};","module.exports = {\n    storage: {\n        NODE_ENV: \"prod\",\n        processedData: [],\n        rawData: []\n    }\n};","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin"],"sourceRoot":""}